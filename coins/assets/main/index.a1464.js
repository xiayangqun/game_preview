window.__require=function e(t,i,o){function n(a,r){if(!i[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){return n(t[a][1][e]||e)},h,h.exports,e,t,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({BoatSDK:[function(e,t){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}cc._RF.push(t,"3e9a02eYkxHWo/OxBCTISVm","BoatSDK"),t.exports=function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./index.js")}({"./index.js":function(e,t,i){var o=new(function(){function e(){}var t=e.prototype;return t._initWXConfig=function(e){var t=i("./src/weapp/request.js"),o=i("./src/weapp/storage.js"),n=i("./src/weapp/ads.js"),s=i("./src/weapp/login.js"),a=i("./src/weapp/share.js");this._platform=e.platform,this._request=new t,this._storage=new o,this._login=new s(e.login),this._share=new a;var r=e.rewardAdUnitId,c=e.bannerAdUnitId,l=e.bannerStyle;if(this._Ads=new n(r,c,l,e.wlad_app_key),e.ald){var h=i("./src/weapp/ald.js");this._ald=new h(e.ald.app_key,e.ald.getLocation),i("./src/weapp/ald/ald-game.js")}},t._initDevConfig=function(e){var t=i("./src/dev/request.js"),o=i("./src/dev/login.js");this._platform=e.platform,this._request=new t,this._login=new o(e.login,e.userInfo)},t.initConfig=function(e){"weapp"==e.platform&&this._initWXConfig(e),"dev"==e.platform&&this._initDevConfig(e)},t.login=function(){return this._login.login()},t.showShare=function(e,t,i){return this._ald?this.ald.showShare(e,t,i):this.share.showShare(e,t,i)},t.sendEvent=function(e,t){this._ald&&this.ald.sendEvent(e,t)},t.wladGetAds=function(e){return new Promise(function(t){wx.wladGetAds(e,function(e){t(e)})})},n(e,[{key:"request",get:function(){if(this._request)return this._request;throw"\u672a\u8bbe\u7f6erequset"}},{key:"ads",get:function(){if(this._Ads)return this._Ads;throw"\u672a\u8bbe\u7f6eAds"}},{key:"storage",get:function(){if(this._storage)return this._storage;throw"\u672a\u8bbe\u7f6eStorage"}},{key:"share",get:function(){if(this._share)return this._share;throw"\u672a\u8bbe\u7f6eStorage"}},{key:"ald",get:function(){if(this._ald)return this._ald;throw"\u672a\u8bbe\u7f6eAld"}}]),e}());e.exports=o},"./src/dev/login.js":function(e,t,i){var o=i("./src/dev/request.js");e.exports=function(){function e(e,t){if(!t)throw"\u7528\u6237\u4fe1\u606f\u4e0d\u5b58\u5728";this.userInfo=t,this.loginUrl=e}return e.prototype.login=function(){return(new o).get(this.loginUrl,this.userInfo).then(function(e){return e})},e}()},"./src/dev/request.js":function(e){e.exports=function(){function e(){}var t=e.prototype;return t.get=function(e,t){return this.request("GET",e,t)},t.post=function(e,t){return this.request("POST",e,t)},t.put=function(e,t){return this.request("PUT",e,t)},t.request=function(e,t,i){var o=this;return new Promise(function(n,s){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400){var o=a.responseText;o?n(JSON.parse(o)):s({msg:"\u8bf7\u6c42\u5931\u8d25",url:t,method:e,data:i})}else s({msg:"\u8bf7\u6c42\u5931\u8d25",url:t,method:e,data:i})},"POST"==e&&(a.open(e,t,!0),a.setRequestHeader("Content-Type","application/json;charset=utf-8 "),a.send(JSON.stringify(i))),"GET"==e&&(a.open(e,t+o.formatParams(i),!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send())})},t.formatParams=function(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},e}()},"./src/weapp/ads.js":function(e,t,o){var s;e.exports=function(){function e(e,t,i,n){this.rewardAdUnitId=e,this.bannerAdUnitId=t,s=n,this.initBannerAd(i),this.initRewardedVideoAd(),n&&o("./src/weapp/wlad_sdk_game/wlad_sdk_game.min.js")}var t=e.prototype;return t.initBannerAd=function(e){this.bannerAdUnitId&&e&&(this._bannerAd=wx.createBannerAd({adUnitId:this.bannerAdUnitId,style:e}))},t.showBanner=function(){if(this._bannerAd)return this._bannerAd.show()},t.hideBanner=function(){this._bannerAd&&this._bannerAd.hide()},t.initRewardedVideoAd=function(){this.rewardAdUnitId&&(this._rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:this.rewardAdUnitId}))},t.showRewardVideo=function(){var e=this._rewardedVideoAd;if(e)return e.onError(function(e){console.log(e)}),e.load().then(function(){return e.show()}).then(function(){return new Promise(function(t){e.onClose(function(e){t(e)})})}).catch(function(e){return new Promise(function(t,i){i(e)})})},e.config=function(){return{wlad_app_key:s}},n(e,[{key:"bannerAd",get:function(){if(i,this._bannerAd)return this._bannerAd}},{key:"rewardedVideoAd",get:function(){if(this._rewardedVideoAd)return this._rewardedVideoAd}}]),e}()},"./src/weapp/ald.js":function(e){var t,i,o=function(){function e(e,o){t=e,i=o,this.app_key=e,this.getLocation=o}var o=e.prototype;return o.showShare=function(e,t,i){return new Promise(function(o){wx.showShareMenu({withShareTicket:!0,success:function(n){var s={title:e,imageUrl:t,query:i};wx.aldShareAppMessage(s),o(s,n)}})})},o.sendEvent=function(e,t){wx.aldSendEvent(e,t)},e.config=function(){return{app_key:t,getLocation:i}},e}();e.exports=o},"./src/weapp/ald/ald-game-conf.js":function(e,t,i){t.app_key=i("./src/weapp/ald.js").config().app_key,t.getLocation=i("./src/weapp/ald.js").config().getLocation},"./src/weapp/ald/ald-game.js":function(e,t,i){!function(){function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function t(e,t){C++,e.as=N,e.at=v,e.rq_c=C,e.ifo=l,e.ak=c.app_key,e.uu=h,e.v=a,e.st=Date.now(),e.ev=t,e.wsr=m,e.ufo=o(e.ufo),e.ec=p,wx.Queue.push(function(){return new Promise(function(t){wx.request({url:"https://"+r+".aldwx.com/d.html",data:e,header:{se:u||"",op:f||"",img:b||""},method:"GET",success:function(){t("")},fail:function(){t("")}})})})}function o(e){if(void 0===e||""===e)return"";var t={};for(var i in e)"rawData"!=i&&"errMsg"!=i&&(t[i]=e[i]);return t}function n(e){var t={};for(var i in e)t[i]=e[i];return t}function s(e){for(var t="",i=0;i<e.length;i++)e[i].length>t.length&&(t=e[i]);return t}wx.Queue=new function(){this.concurrency=5,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(i){var o=function(){e.activeCount++,t().then(function(e){i(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?o():e.queue.push(o)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all();var a="1.0.0",r="glog",c=i("./src/weapp/ald/ald-game-conf.js");""===c.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),c.app_key=c.app_key.replace(/\s/g,""),wx.request({url:"https://"+r+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=a&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var l="",h=function(){var t="";try{t=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(i){t="uuid_getstoragesync"}if(t)l=!1;else{t=e(),l=!0;try{wx.setStorageSync("aldstat_uuid",t)}catch(t){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return t}(),d={},u="",f="",p=0,C="",m=wx.getLaunchOptionsSync(),g=Date.now(),v=""+Date.now()+Math.floor(1e7*Math.random()),N=""+Date.now()+Math.floor(1e7*Math.random()),y=0,_="",b="",L=!0,w=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid"];Promise.all([new Promise(function(e){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){b=s(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e){c.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(d.lat=e[2].latitude||"",d.lng=e[2].longitude||"",d.spd=e[2].speed||""):(d.lat="",d.lng="",d.spd=""),""!==e[1]?d.nt=e[1].networkType||"":d.nt="";var i=n(d);""!==e[0]&&(i.ufo=e[0],_=e[0]),t(i,"init")}),wx.onShow(function(e){C=0,m=e,y=Date.now(),L||(v=""+Date.now()+Math.floor(1e7*Math.random()),l=!1,wx.setStorageSync("ald_ifo",!1)),L=!1;var i=n(d),o=n(d);i.sm=y-g,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(o.tp="ald_share_click",new Promise(function(e){"1044"==m.scene?wx.getShareInfo({shareTicket:m.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){o.ct=e,t(o,"event")})):e.query.ald_share_src&&(o.tp="ald_share_click",o.ct="1",t(o,"event")),t(i,"show")}),wx.onHide(function(){var e=n(d);e.dr=Date.now()-y,""===_?wx.getSetting({success:function(i){i.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(i){e.ufo=i,_=i,b=s(i.userInfo.avatarUrl.split("/")),t(e,"hide")}}):t(e,"hide")}}):t(e,"hide")}),wx.onError(function(e){var i=n(d);i.tp="ald_error_message",i.ct=e,p++,t(i,"event")});for(var A={aldSendEvent:function(e,i){var o=n(d);""!==e&&"string"==typeof e&&e.length<=255?(o.tp=e,"string"==typeof i&&i.length<=255?(o.ct=String(i),t(o,"event")):"object"==typeof i?(JSON.stringify(i).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),o.ct=JSON.stringify(i),t(o,"event")):void 0===i||""===i?t(o,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.onShareAppMessage(function(){var i,o=e(),s="",a="";s=void 0!==o.success?o.success:"",a=void 0!==o.fail?o.fail:"",i=void 0!==m.query.ald_share_src?void 0!==o.query?(m.query.ald_share_src.indexOf(h),o.query+"&ald_share_src="+m.query.ald_share_src+","+h):(m.query.ald_share_src.indexOf(h),"ald_share_src="+m.query.ald_share_src+","+h):void 0!==o.query?o.query+"&ald_share_src="+h:"ald_share_src="+h;var r=n(d);return o.query=i,r.ct=o,r.tp="ald_share_chain",t(r,"event"),o.success=function(e){r.tp="ald_share_status",t(r,"event"),""!==s&&s(e)},o.fail=function(e){r.tp="ald_share_fail",t(r,"event"),""!==a&&a(e)},o})}})},aldShareAppMessage:function(e){var i,o=e,s="",a="";s=void 0!==o.success?o.success:"",a=void 0!==o.fail?o.fail:"",i=void 0!==m.query.ald_share_src?void 0!==o.query?(m.query.ald_share_src.indexOf(h),o.query+"&ald_share_src="+m.query.ald_share_src+","+h):(m.query.ald_share_src.indexOf(h),"ald_share_src="+m.query.ald_share_src+","+h):void 0!==o.query?o.query+"&ald_share_src="+h:"ald_share_src="+h,o.query=i;var r=n(d);r.ct=o,r.tp="ald_share_chain",t(r,"event"),o.success=function(e){r.tp="ald_share_status",t(r,"event"),""!==s&&s(e)},o.fail=function(e){r.tp="ald_share_fail",t(r,"event"),""!==a&&a(e)},wx.updateShareMenu({withShareTicket:!0,complete:function(){wx.shareAppMessage(o)}})},aldSendSession:function(e){if(""!==e&&e){var i=n(d);i.tp="session",i.ct="session",u=e,""===_?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){i.ufo=e,t(i,"event")}}):t(i,"event")}}):(i.ufo=_,""!==_&&(i.gid=""),t(i,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){f=e;var i=n(d);i.tp="openid",i.ct="openid",t(i,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}},S=0;S<w.length;S++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(w[S],A[w[S]]);try{var E=wx.getSystemInfoSync();d.br=E.brand||"",d.md=E.model,d.pr=E.pixelRatio,d.sw=E.screenWidth,d.sh=E.screenHeight,d.ww=E.windowWidth,d.wh=E.windowHeight,d.lang=E.language,d.wv=E.version,d.sv=E.system,d.wvv=E.platform,d.fs=E.fontSizeSetting,d.wsdk=E.SDKVersion,d.bh=E.benchmarkLevel||"",d.bt=E.battery||"",d.wf=E.wifiSignal||"",d.lng="",d.lat="",d.nt="",d.spd="",d.ufo=""}catch(T){}}()},"./src/weapp/login.js":function(e,t,i){var o=i("./src/weapp/wafer/login.js");i("./src/weapp/utils/util.js"),e.exports=function(){function e(e){o.setLoginUrl(e)}return e.prototype.login=function(){return new Promise(function(e,t){o.login({success:function(i){i.unionid||i.unionId?e(i):t({msg:"\u767b\u5f55\u5931\u8d25",error:"unionid"})},fail:function(e){t({msg:"\u767b\u5f55\u5931\u8d25",error:e})}})})},e}()},"./src/weapp/request.js":function(e){var t=function(){function e(){}var t=e.prototype;return t.get=function(e,t){return this.request("GET",e,t)},t.post=function(e,t){return this.request("POST",e,t)},t.put=function(e,t){return this.request("PUT",e,t)},t.request=function(e,t,i){return new Promise(function(o,n){wx.request({url:t,data:i,method:e,success:function(e){o(e)},fail:function(){n({msg:"\u8bf7\u6c42\u5931\u8d25",url:t,method:e,data:i})}})})},e}();e.exports=t},"./src/weapp/share.js":function(e){e.exports=function(){function e(){}return e.prototype.showShare=function(e,t,i){return new Promise(function(o){wx.showShareMenu({withShareTicket:!0,success:function(n){var s={title:e,imageUrl:t,query:i};wx.shareAppMessage(s),o(s,n)}})})},e}()},"./src/weapp/storage.js":function(e){e.exports=function(){function e(e){this.uploadUrl=e}var t=e.prototype;return t.getStorage=function(e){return wx.getStorageSync(e)},t.setStorage=function(e,t){wx.setStorageSync(ket,t)},t.clearStorage=function(){wx.removeStorageSync(SESSION_KEY)},e}()},"./src/weapp/utils/util.js":function(e){var t=function(e){return(e=e.toString())[1]?e:"0"+e};e.exports={formatTime:function(e){var i=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),s=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return[i,o,n].map(t).join("/")+" "+[s,a,r].map(t).join(":")},showBusy:function(e){return wx.showToast({title:e,icon:"loading",duration:1e4})},showSuccess:function(e){return wx.showToast({title:e,icon:"success"})},showModel:function(e,t){wx.hideToast(),wx.showModal({title:e,content:JSON.stringify(t),showCancel:!1})}}},"./src/weapp/wafer/constants.js":function(e){e.exports={WX_HEADER_CODE:"X-WX-Code",WX_HEADER_ENCRYPTED_DATA:"X-WX-Encrypted-Data",WX_HEADER_IV:"X-WX-IV",WX_HEADER_ID:"X-WX-Id",WX_HEADER_SKEY:"X-WX-Skey",WX_SESSION_MAGIC_ID:"F2C224D4-2BCE-4C64-AF9F-A6D872000D1A",ERR_INVALID_PARAMS:"ERR_INVALID_PARAMS",ERR_WX_LOGIN_FAILED:"ERR_WX_LOGIN_FAILED",ERR_WX_GET_USER_INFO:"ERR_WX_GET_USER_INFO",ERR_LOGIN_TIMEOUT:"ERR_LOGIN_TIMEOUT",ERR_LOGIN_FAILED:"ERR_LOGIN_FAILED",ERR_LOGIN_SESSION_NOT_RECEIVED:"ERR_LOGIN_MISSING_SESSION",ERR_INVALID_SESSION:"ERR_INVALID_SESSION",ERR_CHECK_LOGIN_FAILED:"ERR_CHECK_LOGIN_FAILED"}},"./src/weapp/wafer/login.js":function(e,t,i){var o=i("./src/weapp/wafer/utils.js"),n=i("./src/weapp/wafer/constants.js"),s=i("./src/weapp/wafer/session.js"),a=function(){function e(e,t){Error.call(this,t),this.type=e,this.message=t}return e.prototype=new Error,e.prototype.constructor=e,e}(),r=function(){},c={method:"GET",success:r,fail:r,loginUrl:null};e.exports={LoginError:a,login:function(e){if(e=o.extend({},c,e),c.loginUrl){var t=function(){return t=function(t,i){if(t)e.fail(t);else{i.userInfo;var o=i.code,r=i.encryptedData,c=i.iv,l={};l[n.WX_HEADER_CODE]=o,l[n.WX_HEADER_ENCRYPTED_DATA]=r,l[n.WX_HEADER_IV]=c,wx.request({url:e.loginUrl,header:l,method:e.method,data:e.data,success:function(t){var i=t.data;if(i&&i[n.WX_SESSION_MAGIC_ID])if(i.session)i.session.userInfo=i.userInfo,s.set(i.session),e.success(i.userInfo);else{var o="\u767b\u5f55\u5931\u8d25("+i.error+")\uff1a"+(i.message||"\u672a\u77e5\u9519\u8bef"),r=new a(n.ERR_LOGIN_SESSION_NOT_RECEIVED,o);e.fail(r)}else o="\u767b\u5f55\u8bf7\u6c42\u6ca1\u6709\u5305\u542b\u4f1a\u8bdd\u54cd\u5e94\uff0c\u8bf7\u786e\u4fdd\u670d\u52a1\u5668\u5904\u7406 `"+e.loginUrl+"` \u7684\u65f6\u5019\u6b63\u786e\u4f7f\u7528\u4e86 SDK \u8f93\u51fa\u767b\u5f55\u7ed3\u679c",r=new a(n.ERR_LOGIN_SESSION_NOT_RECEIVED,o),e.fail(r)},fail:function(){var t=new a(n.ERR_LOGIN_FAILED,"\u767b\u5f55\u5931\u8d25\uff0c\u53ef\u80fd\u662f\u7f51\u7edc\u9519\u8bef\u6216\u8005\u670d\u52a1\u5668\u53d1\u751f\u5f02\u5e38");e.fail(t)}})}},void wx.login({success:function(e){wx.getUserInfo({success:function(i){t(null,{code:e.code,encryptedData:i.encryptedData,iv:i.iv,userInfo:i.userInfo})},fail:function(e){var i=new a(n.ERR_WX_GET_USER_INFO,"\u83b7\u53d6\u5fae\u4fe1\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u6001");i.detail=e,t(i,null)}})},fail:function(e){var i=new a(n.ERR_WX_LOGIN_FAILED,"\u5fae\u4fe1\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u6001");i.detail=e,t(i,null)}});var t},i=s.get();i?wx.checkSession({success:function(){e.success(i.userInfo)},fail:function(){s.clear(),t()}}):t()}else e.fail(new a(n.ERR_INVALID_PARAMS,"\u767b\u5f55\u9519\u8bef\uff1a\u7f3a\u5c11\u767b\u5f55\u5730\u5740\uff0c\u8bf7\u901a\u8fc7 setLoginUrl() \u65b9\u6cd5\u8bbe\u7f6e\u767b\u5f55\u5730\u5740"))},setLoginUrl:function(e){c.loginUrl=e}}},"./src/weapp/wafer/session.js":function(e,t,i){var o="weapp_session_"+i("./src/weapp/wafer/constants.js").WX_SESSION_MAGIC_ID,n={get:function(){return wx.getStorageSync(o)||null},set:function(e){wx.setStorageSync(o,e)},clear:function(){wx.removeStorageSync(o)}};e.exports=n},"./src/weapp/wafer/utils.js":function(e,t){t.extend=function(e){for(var t=Array.prototype.slice.call(arguments,1),i=0;i<t.length;i+=1){var o=t[i];for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e}},"./src/weapp/wlad_sdk_game/wlad_conf.js":function(e,t,i){t.app_key=i("./src/weapp/ads.js").config().wlad_app_key},"./src/weapp/wlad_sdk_game/wlad_sdk_game.min.js":function(e,t,i){!function(){var e,t,o=i("./src/weapp/wlad_sdk_game/wlad_conf.js"),n="log.51weiliang.com",s="1.0.1",a=wx.getLaunchOptionsSync(),r=a.query._wlp,c=a.scene,l={},h={},d={},u="",f=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()},p=function(){return(new Date).getTime()/1e3},C=function(){var e,t="wlad_uuid";try{return wx.getStorageSync(t)||(e=f(),wx.setStorageSync(t,e),e)}catch(e){}}(),m=(e="wlad_cfg",(t=wx.getStorageSync(e))&&p()<t.expire?d=Object.assign(d,t):wx.request({url:"https://"+n+"/config.json",data:{v:s,ak:o.app_key,type:"game"},method:"GET",success:function(t){if(200===t.statusCode){var i=t.data;s<i.version&&console.warn("\u60a8\u7684\u5fae\u91cf\u8054\u76dfSDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),i.warn&&console.warn(i.warn),i.error&&console.error(i.error),i.expire=p()+i.cfg_ttl,wx.setStorageSync(e,i),d=Object.assign(d,i)}}}),0),g={},v="",N="",y=[],_=0,b=function(){return null!=r&&""!==r},L=function(e,t,i){t=function(e,t){var i="";switch(t.uu=C,t.sc=c,t.ak=o.app_key,t.ww=h.windowWidth,t.wh=h.windowHeight,t.wv=h.version,t.lat=l.lat,t.lon=l.long,t.v=s,t.nick=g.nickName,t.code=N,e){case"d.html":t.tf=v,t.br=h.brand,t.pm=h.model,t.nt=u,t.wlp=r,t.hau=m;break;case"ads.html":t.gend=g.gender,t.prov=g.province,t.city=g.city}return Object.keys(t).sort().forEach(function(e){i=i+"&"+e+"="+t[e]}),i=i.substr(1),t.sn=E(i),t}(e,t),wx.request({url:"https://"+n+"/"+e,data:t,method:"GET",success:function(e){200!==e.statusCode&&console.debug("weiliang sdk request status error"),i&&i(e)},fail:function(){console.debug("weiliang sdk request fail")}})},w=function(e,t,i){if(3===_)L(e,t,i);else{0===_&&A(function(){for(;y.length;)L.apply(this,y.shift())});var o=[e,t,i];y.push(o)}},A=function(e){function t(){5===i.length&&(_=3,e&&e())}_=1;var i=[];wx.login({complete:function(e){e.code&&(N=e.code),i.push("ok1"),t()}}),wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?(m=1)&&wx.getUserInfo({withCredentials:!1,lang:"zh_CN",success:function(e){g=e.userInfo},complete:function(){i.push("ok1"),t()}}):(i.push("ok1"),t())},fail:function(){i.push("ok1"),t()}}),wx.getSystemInfo({success:function(e){h=e},complete:function(){i.push("ok2"),t()}}),wx.getSetting({success:function(e){e.authSetting["scope.userLocation"]?wx.getLocation({type:"wgs84",success:function(e){l.long=e.latitude,l.lat=e.longitude},complete:function(){i.push("ok3"),t()}}):(i.push("ok3"),t())},fail:function(){i.push("ok3"),t()}}),wx.getNetworkType({success:function(e){u=e.networkType},complete:function(){i.push("ok4"),t()}})},S=function(e,t,i){b()&&(e.ev=t,e.life=i,w("d.html",e))},E=function(e){var t,i,o=new Uint8Array(function(e){var t,i,o,n=[];for(t=0;t<e.length;t++)C&&!t&&(e=C.substr(parseInt(C.substr(2,1),16),parseInt(C.substr(11,1),16)).split(n).reverse().join(n)+e.toString()),(i=e.charCodeAt(t))<128?n.push(i):i<2048?n.push(192+(i>>6&31),128+(63&i)):((o=55296^i)>>10==0?(i=(o<<10)+(56320^e.charCodeAt(++t))+65536,n.push(240+(i>>18&7),128+(i>>12&63))):n.push(224+(i>>12&15)),n.push(128+(i>>6&63),128+(63&i)));return n}(e)),n=16+(o.length+8>>>6<<4);for((e=new Uint8Array(n<<2)).set(new Uint8Array(o.buffer)),e=new Uint32Array(e.buffer),i=new DataView(e.buffer),d=0;d<n;d++)e[d]=i.getUint32(d<<2);e[o.length>>2]|=128<<24-8*(3&o.length),e[n-1]=o.length<<3;var s=[],a=[function(){return l[1]&l[2]|~l[1]&l[3]},function(){return l[1]^l[2]^l[3]},function(){return l[1]&l[2]|l[1]&l[3]|l[2]&l[3]},function(){return l[1]^l[2]^l[3]}],r=function(e,t){return e<<t|e>>>32-t},c=[1518500249,1859775393,-1894007588,-899497514],l=[1732584193,-271733879,null,null,-1009589776];for(l[2]=~l[0],l[3]=~l[1],d=0;d<e.length;d+=16){var h=l.slice(0);for(t=0;t<80;t++)s[t]=t<16?e[d+t]:r(s[t-3]^s[t-8]^s[t-14]^s[t-16],1),i=r(l[0],5)+a[t/20|0]()+l[4]+s[t]+c[t/20|0]|0,l[1]=r(l[1],30),l.pop(),l.unshift(i);for(t=0;t<5;t++)l[t]=l[t]+h[t]|0}i=new DataView(new Uint32Array(l).buffer);for(var d=0;d<5;d++)l[d]=i.getUint32(d<<2);return Array.prototype.map.call(new Uint8Array(new Uint32Array(l).buffer),function(e){return(e<16?"0":"")+e.toString(16)}).join("")};wx.onShow(function(e){b()&&(v=f(),S({ref:JSON.stringify(e.referrerInfo),scene:e.scene},"app","show"))}),wx.onHide(function(){var e;b()&&(e=function(){S({},"app","hide")},1===m?e&&e():wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&(m=1,wx.getUserInfo({withCredentials:!1,lang:"zh_CN",success:function(e){g=e.userInfo}})),e&&e()}}))}),wx.wladGetAds=function(e,t){w("ads.html",{num:e},function(e){200===e.statusCode&&t(e.data)})}}()}}),cc._RF.pop()},{}],ByteShareRecordLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"25e763wFMVJKpQzS6i1YyAr","ByteShareRecordLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,closeNode:cc.Node,rewardLabel:cc.Label},videoPath:"",rewardCoin:0,start:function(){AD.showBanner(),Utils.inAction(this.node,this.bgNode,this.blockNode),this.scheduleOnce(function(){this.closeNode.active=!0}.bind(this),2)},onDestroy:function(){AD.hideBanner()},init:function(e,t){this.videoPath=t,this.rewardCoin=e,this.rewardLabel.string="x"+this.rewardCoin},onCloseButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.outAction(this.node,this.bgNode,this.blockNode)},onShareButtonClick:function(){var e=this;audioCtrl.playEffect("musicOn"),tt.shareAppMessage({channel:"video",query:"",extra:{videoPath:this.videoPath,videoTopics:["\u5408\u6210","\u602a\u7269"]},success:function(){LocalData.addCoin(e.rewardCoin),tt.showToast({title:"\u606d\u559c\u4f60\u83b7\u5f97\u91d1\u5e01"+e.rewardCoin}),e.rewardCoin=0,Utils.outAction(e.node,e.bgNode,e.blockNode)},fail:function(){tt.showToast({title:"\u5206\u4eab\u53d6\u6d88",icon:"none"})}})}}),cc._RF.pop()},{}],CheckBoardCtrl:[function(e,t){"use strict";cc._RF.push(t,"f2231qnbNFKoI85kgG2gD2K","CheckBoardCtrl"),cc.Class({extends:cc.Component,properties:{rowMax:0,colMax:0,shaderNode:cc.Node,itemPrefab:cc.Prefab,lightPrefab:cc.Prefab,trashNode:cc.Node,trashSprite:cc.Sprite,trashNormalFrame:cc.SpriteFrame,trashSelectedFrame:cc.SpriteFrame,plunderCtrl:e("plundersCtrl"),masterAtlas:cc.SpriteAtlas},onLoad:function(){var e=this.node.children;this.cellNodes=[],this.itemNodes=[];for(var t=0;t<this.rowMax;t++){this.cellNodes[t]=[],this.itemNodes[t]=[];for(var i=0;i<this.colMax;i++){var o=e[t*this.colMax+i];this.cellNodes[t][i]=o,this.itemNodes[t][i]=null}}this.itemPool=new cc.NodePool("CheckBoardItemCtrl"),this.lightPool=new cc.NodePool("CheckBoardLightCtrl"),this.selectItemNode=null,this.selectTouchID=null,this.selectItemNodeOriginPos=null},init:function(e){for(var t=0;t<e.length;t++){var i=e[t];i.lv<=1&&(i.lv=1),i.lv>Config.masterMaxLv&&(i.lv=Config.masterMaxLv);var o=this.createItemNode(i.lv),n=o.getComponent("CheckBoardItemCtrl");n.row=i.row,n.col=i.col;var s=this.getCellPos(i.row,i.col);o.position=s,o.parent=this.node,this.itemNodes[i.row][i.col]=o}setTimeout(function(){LocalData.save()},1e4)},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this),NC.addObserver(NC.KEY.CHECK_BOARD_EGG_HATCH,this.onEggHatch,this)},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this),NC.removeObserver(NC.KEY.CHECK_BOARD_EGG_HATCH,this),this.itemPool.clear()},onEggHatch:function(e){var t=e.row,i=e.col,o=e.lv,n=this.createLight(o,"hatch"),s=this.getCellPos(t,i);n.position=s,n.parent=this.node,this.plunderCtrl.addPlunderNode(t,i,o)},createItemNode:function(e,t,i){var o=this.itemPool.get(e,t);return null==o&&(o=cc.instantiate(this.itemPrefab)).getComponent("CheckBoardItemCtrl").reuse(e,t,i),o.zIndex=0,o},createLight:function(e,t){var i=this.lightPool.get(e,.1,this._lightFinish,this,t);return null==i&&(i=cc.instantiate(this.lightPrefab)).getComponent("CheckBoardLightCtrl").reuse(e,.1,this._lightFinish,this,t),i.zIndex=2,i},_lightFinish:function(e){this.lightPool.put(e)},onTouchBegan:function(e){if(null==this.selectItemNode){var t=e.getLocation(),i=this.hitTest(t);if(-1!=i.row){var o=this.itemNodes[i.row][i.col];if(null!=o){var n=o.getComponent("CheckBoardItemCtrl");if("egg"==n.state)n.hatch(),audioCtrl.playEffect("merge");else if("master"==n.state){this.selectTouchID=e.getID(),this.selectItemNode=o,this.selectItemNode.zIndex=1,this.showMasterItemFloor(this.selectItemNode),this.showShaderNode(i.row,i.col,n.lv),this.selectItemNodeOriginPos=this.selectItemNode.position,this.trashSprite.spriteFrame=this.trashSelectedFrame;var s=cc.scaleTo(.1,1.25).easing(cc.easeBackOut());this.selectItemNode.runAction(s),audioCtrl.playEffect("merge")}}}}},onTouchMoved:function(e){if(this.selectItemNode&&this.selectTouchID==e.getID()){var t=this.node.convertToNodeSpaceAR(e.getStartLocation()),i=this.node.convertToNodeSpaceAR(e.getLocation()).sub(t),o=this.selectItemNodeOriginPos.add(i);this.selectItemNode.position=o}},onTouchEnded:function(e){if(this.selectItemNode&&this.selectTouchID==e.getID()){var t=e.getLocation(),i=this.hitTest(t),o=i.row,n=i.col,s=this.selectItemNode.getComponent("CheckBoardItemCtrl");if(-1==o)this.trashNode._hitTest(t)?(this.itemNodes[s.row][s.col]=null,this.plunderCtrl.removePlunderNode(s.row,s.col,s.lv),this.itemPool.put(this.selectItemNode),NC.postNotice(NC.KEY.CHECK_BOARD_MASTER_GARBAGE),this.saveSelfToLocalData()):this._reBackItem(this.selectItemNode);else if(o==s.row&&n==s.col)this._reBackItem(this.selectItemNode);else if(null==this.itemNodes[o][n]){var a=s.row,r=s.col;this.itemNodes[a][r]=null,this._moveItemNodeToRowAndCol(this.selectItemNode,o,n),this.plunderCtrl.updatePlunderItem(a,r,o,n),this.saveSelfToLocalData()}else{var c=this.itemNodes[o][n],l=c.getComponent("CheckBoardItemCtrl");"master"==l.state&&s.lv==l.lv?s.lv>=Config.masterMaxLv?(cc.log("\u5df2\u7ecf\u8fbe\u6210\u4e86\u6700\u9ad8\u7b49\u7ea7\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5408\u6210"),this._exchangeItem(this.selectItemNode,c)):(this._synthetiseItem(s,l,o,n),this.saveSelfToLocalData()):(cc.log("\u4e0d\u7b26\u5408\u89c4\u5219\uff0c\u65e0\u6cd5\u5408\u6210"),this._exchangeItem(this.selectItemNode,c))}var h=cc.scaleTo(.1,1);this.selectItemNode.runAction(h),this.hideMasterItemFloor(this.selectItemNode),this.selectTouchID=null,this.selectItemNode.zIndex=0,this.selectItemNode=null,this.hideShaderNode(),this.selectItemNodeOriginPos=null,this.trashSprite.spriteFrame=this.trashNormalFrame}},onTouchCanceled:function(e){this.onTouchEnded(e)},showMasterItemFloor:function(e){for(var t=e.getComponent("CheckBoardItemCtrl").lv,i=0;i<this.itemNodes.length;i++)for(var o=this.itemNodes[i],n=0;n<o.length;n++)if(o[n]&&o[n]!=e){var s=o[n].getComponent("CheckBoardItemCtrl");s.lv==t&&0==s.isEgg()&&s.lv<Config.masterMaxLv&&s.showFloor()}},hideMasterItemFloor:function(e){e.getComponent("CheckBoardItemCtrl").lv;for(var t=0;t<this.itemNodes.length;t++)for(var i=this.itemNodes[t],o=0;o<i.length;o++)i[o]&&i[o].getComponent("CheckBoardItemCtrl").hideFloor()},_synthetiseItem:function(e,t,i,o){this.itemNodes[e.row][e.col]=null,this.itemNodes[t.row][t.col]=null,this.plunderCtrl.removePlunderNode(e.row,e.col),this.plunderCtrl.removePlunderNode(t.row,t.col);var n=this.getCellPos(i,o),s=t.lv+1,a=this.createItemNode(s),r=a.getComponent("CheckBoardItemCtrl");r.row=i,r.col=o,a.position=n,a.parent=this.node,this.itemNodes[i][o]=a,r.waitShowSelf(.3),this.plunderCtrl.addPlunderNode(i,o,s);var c=this.createLight(s,"synthetise");c.position=n,c.parent=this.node,audioCtrl.playEffect("merge2"),this.scheduleOnce(function(){LocalData.unlockMasterMaxLv=s,NC.postNotice(NC.KEY.CHECK_BOARD_MASTER_SYNTHETIZE)},1),this.itemPool.put(e.node),this.itemPool.put(t.node)},_exchangeItem:function(e,t,i){var o=e.getComponent("CheckBoardItemCtrl"),n=o.row,s=o.col,a=t.getComponent("CheckBoardItemCtrl"),r=a.row,c=a.col,l=this.getCellPos(n,s);this.itemNodes[n][s]=t,a.row=n,a.col=s,t.stopAllActions();var h=cc.moveTo(i||1,l).easing(cc.easeBackOut());t.runAction(h);var d=this.getCellPos(r,c);this.itemNodes[r][c]=e,o.row=r,o.col=c,e.stopAllActions();var u=cc.moveTo(i||1,d).easing(cc.easeBackOut());e.runAction(u),this.plunderCtrl.exchangeItem(n,s,r,c)},hitTest:function(e){for(var t=0;t<this.cellNodes.length;t++)for(var i=this.cellNodes[t],o=0;o<i.length;o++)if(i[o]._hitTest(e))return{row:t,col:o};return{row:-1,col:-1}},getCellPos:function(e,t){var i=-180*(e+.5),o=220*(t+.5);return cc.v2(o-this.node.width/2,i+this.node.height/2)},_reBackItem:function(e){var t=e.getComponent("CheckBoardItemCtrl"),i=t.row,o=t.col;e.stopAllActions();var n=this.getCellPos(i,o),s=cc.moveTo(1,n).easing(cc.easeBackOut());e.runAction(s)},_moveItemNodeToRowAndCol:function(e,t,i,o){var n=e.getComponent("CheckBoardItemCtrl");n.row=t,n.col=i,cc.assert(null==this.itemNodes[t][i],"\u5c06\u8981\u5c06\u4e00\u4e2aItem\u79fb\u52a8\u5230\u6307\u5b9a\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u8fd9\u4e2a\u4f4d\u7f6e\u5df2\u7ecf\u6709\u4e00\u4e2aItem"),this.itemNodes[t][i]=e,e.stopAllActions();var s=this.getCellPos(t,i),a=cc.moveTo(o||1,s).easing(cc.easeBackOut());e.runAction(a)},tryAddNewItem:function(e,t){for(var i=0;i<this.itemNodes.length;i++)for(var o=this.itemNodes[i],n=0;n<o.length;n++)if(null==this.itemNodes[i][n]){var s=this.createItemNode(e);return s.parent=this.node,s.position=this.node.convertToNodeSpaceAR(t),this._moveItemNodeToRowAndCol(s,i,n,.5),this.plunderCtrl.addPlunderNode(i,n,e),this.saveSelfToLocalData(),!0}return!1},putEgg:function(e,t,i){for(var o=0;o<this.itemNodes.length;o++)for(var n=this.itemNodes[o],s=0;s<n.length;s++)if(null==this.itemNodes[o][s]){var a=this.createItemNode(e,t,i),r=a.getComponent("CheckBoardItemCtrl");return r.row=o,r.col=s,a.parent=this.node,a.position=this.getCellPos(o,s),this.itemNodes[o][s]=a,0==r.isEgg()&&this.plunderCtrl.addPlunderNode(o,s,e),this.saveSelfToLocalData(),!0}cc.log("putEgg \u51fa\u9519\u4e86\uff0c\u56e0\u4e3a\u6ca1\u6709\u8db3\u591f\u7684\u5730\u65b9\u4e86")},hasEnoughCell:function(){for(var e=0;e<this.itemNodes.length;e++)for(var t=this.itemNodes[e],i=0;i<t.length;i++)if(null==this.itemNodes[e][i])return!0;return!1},getSerialize:function(){for(var e=[],t=0;t<this.itemNodes.length;t++)for(var i=0;i<this.itemNodes[t].length;i++)if(this.itemNodes[t][i]){var o=this.itemNodes[t][i].getComponent("CheckBoardItemCtrl").lv;e.push({row:t,col:i,lv:o})}return e},saveSelfToLocalData:function(){LocalData.checkBoardData=this.getSerialize()},showShaderNode:function(e,t,i){this.shaderNode.active=!0;var o=this.getCellPos(e,t);this.shaderNode.position=o,this.shaderNode.getComponent(cc.Sprite).spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+i)},hideShaderNode:function(){this.shaderNode.active=!1}}),cc._RF.pop()},{plundersCtrl:"plundersCtrl"}],CheckBoardItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"11424jZWRxET7Fp54ohOlxq","CheckBoardItemCtrl"),cc.Class({extends:cc.Component,properties:{shaderNode:cc.Node,masterNormalSpriteAtlas:cc.SpriteAtlas,row:0,col:0,lv:0,eggLv:0,iconSprite:cc.Sprite,eggSpritre:cc.Sprite,lvIconNode:cc.Node,lvLabel:cc.Label,state:""},start:function(){},reuse:function(e,t,i){this.lv=e,this.iconSprite.spriteFrame=this.masterNormalSpriteAtlas.getSpriteFrame("MN-LV"+e),this.lvLabel.string=e,this.eggLv=t||0,this.eggLv<0?(this.eggSpritre.spriteFrame=this.masterNormalSpriteAtlas.getSpriteFrame("MN-LV"+this.eggLv),this.eggSpritre.node.active=!0,this.iconSprite.node.active=!1,this.lvIconNode.active=!1,this.scheduleOnce(this.hatch,i||10),this.state="egg",this.eggSpritre.node.y=0,this.eggSpritre.node.runAction(cc.moveTo(.5,0,-54.7).easing(cc.easeBounceOut()))):(this.eggSpritre.node.active=!1,this.iconSprite.node.active=!0,this.lvIconNode.active=!0,this.state="master",Utils.setNodeJellyForever(this.iconSprite.node))},hatch:function(){this.unscheduleAllCallbacks(),cc.log("\u86cb\u8981\u5b75\u5316\u4e86");var e=cc.rotateTo(.1,-10),t=cc.rotateTo(.1,10),i=cc.repeat(cc.sequence(e,t),3),o=cc.callFunc(function(){this.eggSpritre.node.active=!1,this.iconSprite.node.active=!0,Utils.setNodeJellyForever(this.iconSprite.node),this.lvIconNode.active=!0,NC.postNotice(NC.KEY.CHECK_BOARD_EGG_HATCH,{row:this.row,col:this.col,lv:this.lv}),this.state="master",audioCtrl.playEffect("merge")},this);this.eggSpritre.node.runAction(cc.sequence(i,o)),this.state="hatch"},isEgg:function(){return this.eggSpritre.node.active},unuse:function(){this.row=-1,this.col=-1,this.lv=-1,this.node.stopAllActions(),this.node.scale=1,this.eggSpritre.node.stopAllActions(),this.eggSpritre.node.rotation=0,this.unscheduleAllCallbacks(),this.state="",Utils.stopNodeJellyForever(this.iconSprite.node),this.hideFloor()},showFloor:function(){this.shaderNode.active=!0,this.shaderNode.scale=.9;var e=cc.scaleTo(.3,.8),t=cc.scaleTo(.3,.9);this.shaderNode.runAction(cc.repeatForever(cc.sequence(e,t)))},hideFloor:function(){this.shaderNode.active=!1,this.shaderNode.stopAllActions()},waitShowSelf:function(e){this.iconSprite.node.active=!1,this.state="wait",setTimeout(function(){this.iconSprite.node.active=!0,this.state="master"}.bind(this),1e3*e)}}),cc._RF.pop()},{}],CheckBoardLightCtrl:[function(e,t){"use strict";cc._RF.push(t,"8d60caP6jNK5YcRvMH5/hgv","CheckBoardLightCtrl"),cc.Class({extends:cc.Component,properties:{masterAtlas:cc.SpriteAtlas,masterSprite:cc.Sprite,masterSpriteLeft:cc.Sprite,masterSpriteRight:cc.Sprite,animation:cc.Animation,star1:cc.ParticleSystem,star2:cc.ParticleSystem},start:function(){this.animation.on(cc.Animation.EventType.FINISHED,this.onFinish,this)},onDestroy:function(){this.animation.off(cc.Animation.EventType.FINISHED,this.onFinish,this)},reuse:function(e,t,i,o,n){if(this.masterSprite.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+e),this.target=o,this.fun=i,"hatch"==n)this.animation.play("CheckBoardHatch");else if("synthetise"==n){var s=e-1;this.masterSpriteLeft.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+s),this.masterSpriteRight.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+s),this.animation.play("CheckBoardSynthetize")}},star2Player:function(){this.star2.positionType=cc.ParticleSystem.PositionType.GROUPED,this.star2.resetSystem()},star1Player:function(){this.star1.positionType=cc.ParticleSystem.PositionType.GROUPED,this.star1.resetSystem()},onFinish:function(){this.fun&&this.fun.call(this.target,this.node)},unuse:function(){}}),cc._RF.pop()},{}],Language:[function(e,t){"use strict";cc._RF.push(t,"d1855wy0ktKsJxP6rpJSwZI","Language"),window.Language={coin:"\u91d1\u5e01",speed:"\u901f\u5ea6",second:"\u79d2",infinite:"\u65e0\u9650"},cc._RF.pop()},{}],LoginSceneCtrl:[function(e,t){"use strict";cc._RF.push(t,"54297pwPLdE7LgxedZTQd9b","LoginSceneCtrl"),cc.Class({extends:cc.Component,properties:{editBox:cc.EditBox,bgNode:cc.Node,csvTexts:[cc.TextAsset],versionLabel:cc.Label,preloadAtlas:[cc.SpriteAtlas]},onLoad:function(){var t=this;if(Utils.fixBg(this.bgNode),this.versionLabel.string="version:"+Config.version,cc.sys.platform==cc.sys.WECHAT_GAME){e("BoatSDK").initConfig({login:Config.service.login,rewardAdUnitId:Config.ads.rewardAdUnitId,bannerAdUnitId:Config.ads.bannerAdUnitId,bannerStyle:Config.ads.bannerStyle,platform:"weapp",ald:Config.ald,wlad_app_key:Config.wlad_app_key}),cc.find("Canvas/testButton").active=!1,this.editBox.node.active=!1,wx.getUserInfo({success:function(){t._onWXButtonClick()},fail:function(){t.showWXCreateUserInfoButton()}});var i=wx.getSystemInfoSync();Utils.isIPhoneX(i.model)?this.versionLabel.node.y=cc.view.getVisibleSize().height/2-120:this.versionLabel.node.y=cc.view.getVisibleSize().height/2-50}},start:function(){LocalData.registerEvent(),CSV.init(this.csvTexts,["castle","lottery","master","system","technology"]),audioCtrl.load(),audioCtrl.playMusic("BGM")},onWXLoginButtonClick:function(){},showWXCreateUserInfoButton:function(){var e=wx.getSystemInfoSync(),t=e.screenWidth,i=e.screenHeight;this.button=wx.createUserInfoButton({type:"text",text:"",style:{width:t,height:i/2,lineHeight:40,left:0,top:i/2,backgroundColor:"#00A3FF00",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}}),this.button.onTap(this._onWXButtonClick.bind(this))},_onWXButtonClick:function(){var t=this;audioCtrl.playEffect("musicOn"),this.button&&this.button.destroy(),wx.showLoading({title:"\u6b63\u5728\u767b\u9646",mask:!0}),audioCtrl.playEffect("musicOn");var i=e("BoatSDK");window.boatSDK=i,i.login().then(function(e){if(e.error)Utils.showToast(e.message),wx.hideLoading({}),t.showWXCreateUserInfoButton();else{Utils.mixObj(LocalData.wxUserInfo,e),LocalData.wxUserInfo.inited=!0;var i={unionid:LocalData.wxUserInfo.unionid};Utils.POST(Config.service.load,i,function(e,t){if(e)wx.hideLoading({}),Utils.showToast("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u5c1d\u8bd5"),this.showWXCreateUserInfoButton();else{var i=JSON.parse(t);if(i.error&&"user not found"!=i.error)Utils.showToast(i.error),wx.hideLoading({}),this.showWXCreateUserInfoButton();else{if(i.data){LocalData.load(i.data.save_data),LocalData.wxUserInfo.id=i.data.id;var o=wx.getLaunchOptionsSync();if(o&&o.query){var n=o.query.fromId||o.query.scene;n&&null==LocalData.whoInviteMe&&Utils.sendWhoInvite(n,!1)}}else{LocalData.load("");var s=wx.getLaunchOptionsSync();if(s&&s.query){var a=s.query.fromId||s.query.scene;a&&(LocalData.whoInviteMe=a)}}Share.init(i.info.shares),Utils.setTimestamp(i.info.timestamp),i.info.more&&(Config.more=i.info.more),null!=i.info.isShowMore&&(Config.isShowMore=i.info.isShowMore),null!=i.info.adProbabilitys&&(Config.adProbabilitys=i.info.adProbabilitys),cc.director.loadScene("MainScene"),wx.hideLoading({})}}}.bind(t))}},function(){Utils.showToast("\u767b\u5f55\u5931\u8d25\u4e86\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u7f51\u7edc"),wx.hideLoading({}),t.showWXCreateUserInfoButton()})},onTestButtonClick:function(){var t=this;audioCtrl.playEffect("musicOn");var i=this.editBox.string;if(""!=i){var o=e("BoatSDK");window.boatSDK=o,cc.log("\u5c06boatSDK \u6ce8\u518c\u4e3a\u5168\u5c40\u53d8\u91cf"),LocalData.wxUserInfo.unionid=i,LocalData.wxUserInfo.openid=i,LocalData.nickname=i,o.initConfig({login:"https://server.janusgames.cn/game/api/merge_monster/dev/login",adUnitId:Config.ads.adUnitId,bannerStyle:Config.ads.bannerStyle,platform:"dev",userInfo:LocalData.wxUserInfo,wlad_app_key:Config.wlad_app_key}),Utils.Dialog.show(1,"\u6b63\u5728\u767b\u9646..."),o.login().then(function(e){if(e.error)Utils.showToast(e.message),Utils.Dialog.hide(1);else{Utils.mixObj(LocalData.wxUserInfo,e),LocalData.wxUserInfo.inited=!0;var i={unionid:LocalData.wxUserInfo.unionid};Utils.POST(Config.service.load,i,function(e,t){if(e)Utils.showToast("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u518d\u6b21\u5c1d\u8bd5"),Utils.Dialog.hide(1);else{var i=JSON.parse(t);i.error&&"user not found"!=i.error?(Utils.showToast(i.error),Utils.Dialog.hide(1)):(i.data?(LocalData.load(i.data.save_data),LocalData.wxUserInfo.id=i.data.id):LocalData.load(""),i.info.more&&(Config.more=i.info.more),Utils.setTimestamp(i.info.timestamp),null!=i.info.adProbabilitys&&(Config.adProbabilitys=i.info.adProbabilitys),cc.director.loadScene("MainScene"))}}.bind(t))}},function(){Utils.showToast("\u767b\u5f55\u5931\u8d25\u4e86\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u7f51\u7edc"),Utils.Dialog.hide(1)})}else cc.log("openid \u4e0d\u80fd\u4e3a\u7a7a\u54e6")}}),cc._RF.pop()},{BoatSDK:"BoatSDK"}],MainSceneCtrl:[function(e,t){"use strict";cc._RF.push(t,"ddf7eLXZk1FkIVxzJwCF/O8","MainSceneCtrl"),cc.Class({extends:cc.Component,properties:{csvTexts:[cc.TextAsset],castleCtrl:e("castleCtrl"),checkBoradCtrl:e("CheckBoardCtrl"),plunderCtrl:e("plundersCtrl"),guideCtrl:e("guideCtrl"),addButtonNode:cc.Node,canPutFreeEggCount:0},onLoad:function(){AD.createVideo(),AD.createInterstitial(),AD.createBanner(),LocalData.load(),CSV.init(this.csvTexts,["castle","lottery","master","system","technology"]),audioCtrl.load(),audioCtrl.playMusic("BGM"),NC.addObserver(NC.KEY.CASTLE_LV_CHANGED,this.onCastleLvChanged,this),NC.addObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this.onUnLockMasterLvChanged,this),NC.addObserver(NC.KEY.CAN_PUT_FREE_EGG,this.onCanPutFreeEggChanged,this),NC.addObserver(NC.KEY.ON_GAME_SHOW,this.onGameShow,this),NC.addObserver(NC.KEY.CHECK_BOARD_MASTER_SYNTHETIZE,this.onCheckBoardEmpty,this),NC.addObserver(NC.KEY.CHECK_BOARD_MASTER_GARBAGE,this.onCheckBoardEmpty,this),cc.sys.platform==cc.sys.WECHAT_GAME&&(this._wxShowFun=this.onWXGameShow.bind(this),wx.onShow(this._wxShowFun))},start:function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var e=cc.view.getVisibleSize();wx.createGameClubButton({icon:"white",style:Utils.convertToWXStyle(e.width-58,58,80,80)})}var t=cc.view.getVisibleSize(),i=cc.find("Canvas/UI").height,o=t.height-i+620,n=t.height-o-400,s=cc.find("Canvas/CheckBoard");n<900&&(s.scale=n/900),s.y=-t.height/2+n/2+90*s.scale+400;var a=cc.find("Canvas/CheckBoardBg");a.scale=s.scale,a.y=s.y,this.castleCtrl.init(LocalData.castleLv,LocalData.castleRmainCoin),this.onGameShow(),this.scheduleOnce(function(){this.checkBoradCtrl.init(LocalData.checkBoardData),this.plunderCtrl.init(LocalData.checkBoardData,1)},.1),this.schedule(function(){if(0==this.canPutFreeEggCount&&this.checkBoradCtrl.hasEnoughCell()){var e=parseInt(CSV.master[LocalData.unlockMasterMaxLv].unlock_egg_lv);this.checkBoradCtrl.putEgg(e,-1)}LocalData.save()},15),LocalData.isNew?(this.guideCtrl.begin(),LocalData.isNew=!1):this.guideCtrl.node.destroy()},onDestroy:function(){NC.removeObserver(NC.KEY.CASTLE_LV_CHANGED,this),NC.removeObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this),NC.removeObserver(NC.KEY.CAN_PUT_FREE_EGG,this),NC.removeObserver(NC.KEY.ON_GAME_SHOW,this),NC.removeObserver(NC.KEY.CHECK_BOARD_MASTER_SYNTHETIZE,this),NC.removeObserver(NC.KEY.CHECK_BOARD_MASTER_GARBAGE,this),cc.sys.platform==cc.sys.WECHAT_GAME&&wx.offShow(this._wxShowFun)},onCastleLvChanged:function(e){Utils.loadResWithCorrection("Prefab/unlockCastleLayer/unlockCastleLayer",cc.Prefab,function(t,i){if(t)cc.log("\u51fa\u9519\u4e86,",t);else{var o=cc.instantiate(i);o.getComponent("unlockCastleLayerCtrl").init(e),o.parent=cc.find("Canvas")}}),AD.showInterstitial()},onUnLockMasterLvChanged:function(e){Utils.loadResWithCorrection("Prefab/unlockMasterLayer/unlockMasterLayer",cc.Prefab,function(t,i){if(t)cc.log("\u51fa\u9519\u4e86,",t);else{var o=cc.instantiate(i);o.getComponent("unlockMasterLayerCtrl").init(e),o.parent=cc.find("Canvas")}}),AD.showInterstitial()},onCanPutFreeEggChanged:function(e){this.canPutFreeEggCount+=!1===e?-1:1},onGameShow:function(){var e=LocalData.solveOffLineReward();e>0&&Utils.loadResWithCorrection("Prefab/offlineRewardLayer/offlineRewardLayer",cc.Prefab,function(t,i){if(t)cc.log("\u51fa\u9519\u4e86,",t);else{var o=cc.instantiate(i);o.getComponent("offlineRewardLayerCtrl").init(e),o.parent=cc.find("Canvas")}})},onWXGameShow:function(e){var t=e.query.fromId||e.query.scene;t&&null==LocalData.whoInviteMe&&Utils.sendWhoInvite(t,!1)},onAddItemButtoClick:function(){var e=this.addButtonNode.convertToWorldSpaceAR(cc.v2(0,0));this.checkBoradCtrl.tryAddNewItem(1,e)||cc.log("\u68cb\u76d8\u6ca1\u6709\u4f4d\u7f6e\u4e86")},onCheckBoardEmpty:function(){var e=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");if(e.hasEnoughCell()){var t=LocalData.popStorageEgg();t&&e.putEgg(t.lv,t.eggType)}}}),cc._RF.pop()},{CheckBoardCtrl:"CheckBoardCtrl",castleCtrl:"castleCtrl",guideCtrl:"guideCtrl",plundersCtrl:"plundersCtrl"}],NewScript:[function(e,t){"use strict";cc._RF.push(t,"80cffN8VrBPbrfOPp7ZBOqz","NewScript"),cc.Class({extends:cc.Component,properties:{},start:function(){this.animation=this.node.getComponent(cc.Animation),this.animation.on(cc.Animation.EventType.FINISHED,this.onFinish,this),this.playIndex=0},onFinish:function(){this.playIndex++;var e=this.animation.getClips();this.playIndex<e.length?this.animation.play(e[this.playIndex].name):cc.log("\u6240\u6709\u52a8\u753b\u90fd\u64ad\u653e\u5b8c\u6bd5")},onDestroy:function(){this.animation.off(cc.Animation.EventType.FINISHED,this.onFinish,this)}}),cc._RF.pop()},{}],TableViewCtrlH:[function(e,t){"use strict";cc._RF.push(t,"ccd0fSRUCVEHI8piHZz+Cpu","TableViewCtrlH"),cc.Class({extends:cc.Component,properties:{itemWidth:80,itemTotal:100,content:cc.Node,scrollView:cc.ScrollView,itemPrefab:cc.Prefab,itemCtrlName:"",_sourceData:[],_reuseArray:[],_usedArray:[]},onLoad:function(){this.reload()},onDestroy:function(){},getItem:function(){var e=this._reuseArray.pop();return null==e&&(e=cc.instantiate(this.itemPrefab)),e.getComponent(this.itemCtrlName).reuse(),e},update:function(){if(0!=this.scrollView.node.active){var e=-this.scrollView.getContentPosition().x,t=this.scrollView.node.width+e,i=Math.floor(Math.floor(e)/this.itemWidth)-1,o=Math.ceil(Math.floor(t)/this.itemWidth)+1;i<0&&(i=0),o>this.itemTotal-1&&(o=this.itemTotal-1);var n=_.groupBy(this._usedArray,function(e){return e.cellIndex>=i&&e.cellIndex<=o?"usedAarray":"reusedArray"}.bind(this));this._usedArray=n.usedAarray||[],_.each(n.reusedArray,function(e){e.parent=null,e.getComponent(this.itemCtrlName).unuse(),this._reuseArray.push(e)}.bind(this));for(var s=i;s<=o;s++)if(0==_.some(this._usedArray,function(e){return e.cellIndex==s})){var a=this.getItem(s);null==a&&cc.log("sss"),a.cellIndex=s,a.x=(s+.5)*this.itemWidth,a.y=0,a.parent=this.content,this._usedArray.push(a)}}},reload:function(){for(var e=0;e<this._usedArray.length;e++)this._usedArray[e].parent=null,this._usedArray[e].getComponent(this.itemCtrlName).unuse(),this._reuseArray.push(this._usedArray[e]);this._usedArray=[],this.itemTotal=this._sourceData.length;var t=Math.max(this.scrollView.node.getContentSize().width,this.itemWidth*this.itemTotal);this.scrollView.node.height,this.content.width=t,this.scrollView.scrollToLeft()},clearReuserArray:function(){for(var e=0;e<this._reuseArray.length;e++)this._reuseArray[e].getComponent(this.itemCtrlName).unuse(),this._reuseArray[e].destroy()}}),cc._RF.pop()},{}],TableViewCtrlV:[function(e,t){"use strict";cc._RF.push(t,"22e1eGJ+etMe7S/GvpViLMV","TableViewCtrlV"),cc.Class({extends:cc.Component,properties:{itemHeight:80,itemTotal:100,content:cc.Node,scrollView:cc.ScrollView,itemPrefab:cc.Prefab,itemCtrlName:"",_sourceData:[],_reuseArray:[],_usedArray:[]},onLoad:function(){},onDestroy:function(){},getItem:function(){var e=this._reuseArray.pop();return null==e&&(e=cc.instantiate(this.itemPrefab)),e.getComponent(this.itemCtrlName).reuse(),e},update:function(){if(0!=this.scrollView.node.active){var e=-this.scrollView.getContentPosition().y,t=this.scrollView.node.height+e,i=this.content.height-t,o=this.content.height-e,n=Math.floor(Math.floor(i)/this.itemHeight)-1,s=Math.ceil(Math.floor(o)/this.itemHeight)+1;n<0&&(n=0),s>this.itemTotal-1&&(s=this.itemTotal-1);var a=_.groupBy(this._usedArray,function(e){return e.cellIndex>=n&&e.cellIndex<=s?"usedAarray":"reusedArray"}.bind(this));this._usedArray=a.usedAarray||[],_.each(a.reusedArray,function(e){e.parent=null,e.getComponent(this.itemCtrlName).unuse(),this._reuseArray.push(e)}.bind(this));for(var r=n;r<=s;r++)if(0==_.some(this._usedArray,function(e){return e.cellIndex==r})){var c=this.getItem(r);null==c&&cc.log("sss"),c.cellIndex=r,c.x=0,c.y=this.content.height-(r+.5)*this.itemHeight,c.parent=this.content,this._usedArray.push(c)}}},reload:function(){for(var e=0;e<this._usedArray.length;e++)this._usedArray[e].parent=null,this._usedArray[e].getComponent(this.itemCtrlName).unuse(),this._reuseArray.push(this._usedArray[e]);this._usedArray=[],this.itemTotal=this._sourceData.length,this.scrollView.node.getContentSize().width;var t=Math.max(this.scrollView.node.getContentSize().height,this.itemHeight*this.itemTotal);this.content.height=t,this.scrollView.scrollToTop()},clearReuserArray:function(){for(var e=0;e<this._reuseArray.length;e++)this._reuseArray[e].getComponent(this.itemCtrlName).unuse(),this._reuseArray[e].destroy()}}),cc._RF.pop()},{}],UIAddCtrl:[function(e,t){"use strict";cc._RF.push(t,"b3f86ncmP1DEYqGZjv2UwOk","UIAddCtrl"),cc.Class({extends:cc.Component,properties:{lvLabel:cc.Label,costLabel:cc.Label,masterIcon:cc.Sprite,masterAtlas:cc.SpriteAtlas,canBuyLv:0},onLoad:function(){},start:function(){Utils.setNodeJellyForever(this.masterIcon.node),NC.addObserver(NC.KEY.MASTER_BUY_TIMES_CHANGED,this.onBuyMasterTimeChanged,this),NC.addObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this.onBuyMasterTimeChanged,this),NC.addObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this.onBuyMasterTimeChanged,this),this.onBuyMasterTimeChanged()},onDestroy:function(){NC.removeObserver(NC.KEY.MASTER_BUY_TIMES_CHANGED,this),NC.removeObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this),NC.removeObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this)},onBuyMasterTimeChanged:function(){for(var e=CSV.master[LocalData.unlockMasterMaxLv],t=parseInt(e.unlock_gold_lv),i=Math.max(t-7,1),o=t,n=[],s=i;s<=o;s++){var a=CSV.master[s],r=parseFloat(a.reward)*parseFloat(a.speed)/LocalData.solveMasterConstCoin(s);r*=Math.pow(1.5,s-i),n.push({lv:s,finalRate:r})}n.sort(function(e,t){return t.finalRate-e.finalRate}),this.canBuyLv=n[0].lv,this.lvLabel.string="LV"+this.canBuyLv;var c=LocalData.solveMasterConstCoin(this.canBuyLv);this.costLabel.string=Utils.formatNumber(c),this.masterIcon.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+this.canBuyLv)},onAddButtonClick:function(){audioCtrl.playEffect("musicOn");var e=this.canBuyLv,t=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");if(t.hasEnoughCell()){var i=LocalData.solveMasterConstCoin(e);i>LocalData.coin?Utils.showNotEnoughCoin():(t.putEgg(e,-2),LocalData.subCoin(i),LocalData.addMasterBuyTimes(e,1))}else Utils.showToast("\u4f4d\u7f6e\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8d2d\u4e70")}}),cc._RF.pop()},{}],UIButterflyCtrl:[function(e,t){"use strict";cc._RF.push(t,"f1f8e7DA6RK8oN6/7og+rAA","UIButterflyCtrl"),cc.Class({extends:cc.Component,properties:{spriteNode:cc.Node},start:function(){var e=cc.moveTo(1,0,50),t=cc.moveTo(1,0,-50),i=cc.sequence(e,t);this.spriteNode.runAction(cc.repeatForever(i))}}),cc._RF.pop()},{}],UIByteCustomButtonCtrl:[function(e,t){"use strict";cc._RF.push(t,"a00d36jnEJL4bOSvc8nz2dW","UIByteCustomButtonCtrl");var i=0;cc.Class({extends:cc.Component,properties:{recordSprite:cc.Sprite,startFrame:cc.SpriteFrame,stopFrame:cc.SpriteFrame,shareVideoPrefab:cc.Prefab},onLoad:function(){cc.sys.platform==cc.sys.BYTE_GAME?(tt.getGameRecorderManager().onError(function(e){tt.showToast({title:e.errMsg})}),this._refreshRecordButtonIcon(),this.startRecordAndUpdateTick()):this.node.active=!1},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),JsNativeBridge.showShare({})},startRecordAndUpdateTick:function(){var e=this,t=tt.getGameRecorderManager();0==t._recording&&(t.onStart(function(){e._refreshRecordButtonIcon(),i=moment().unix(),e.schedule(e.updateTick,1)}),t.start({duration:300}))},updateTick:function(){var e=this;if(moment().unix()-i>=120){var t=tt.getGameRecorderManager();1==t._recording&&(t.onStop(function(t){e._popByteVideoShareLayer(t.videoPath),e._refreshRecordButtonIcon()}),t.stop({duration:300})),this.unschedule(this.updateTick)}},onRecordButtonClick:function(){var e=this;audioCtrl.playEffect("musicOn");var t=tt.getGameRecorderManager();0==t._recording?(t.onStart(function(){e._refreshRecordButtonIcon(),i=moment().unix()}),t.start({duration:120})):moment().unix()-i>3?(t.onStop(function(t){console.log(t.videoPath),e._popByteVideoShareLayer(t.videoPath),e._refreshRecordButtonIcon()}),t.stop({duration:300}),this.unschedule(this.updateTick)):tt.showToast({title:"\u5f55\u5c4f\u65f6\u95f4\u4e0d\u80fd\u5c11\u4e8e3\u79d2",icon:"none"})},_refreshRecordButtonIcon:function(){var e=tt.getGameRecorderManager()._recording;this.recordSprite.spriteFrame=e?this.stopFrame:this.startFrame},_popByteVideoShareLayer:function(e){var t=cc.instantiate(this.shareVideoPrefab),i=t.getComponent("ByteShareRecordLayerCtrl"),o=LocalData.castleLv*LocalData.castleLv*100;i.init(o,e),t.parent=cc.find("Canvas")||cc.find("touchCanvas")}}),cc._RF.pop()},{}],UICtrl:[function(e,t){"use strict";cc._RF.push(t,"1a6a1IY5DVEQaBujDAcxzya","UICtrl"),cc.Class({extends:cc.Component,properties:{cumulativeCoinLabel:cc.Label,diamondLabel:cc.Label,nicknameLabel:cc.Label,headIconSprite:cc.Sprite,butterflyNode:cc.Node,coinLabel:cc.Label,perSecondLabel:cc.Label,coinIncreaseLabel:cc.Label,speedUpLabel:cc.Label,transcendCtrl:e("UItranscendCtrl"),addCtrl:e("UIAddCtrl"),videoCtrl:e("UIVideoCtrl"),musicToggle:cc.Toggle,uiNodes:[cc.Node],upNodes:[cc.Node]},onLoad:function(){var e=cc.view.getVisibleSize();this.node.width=e.width,this.node.height=e.height,this.node.x=0,this.node.y=-e.height/2,this.node.height=cc.view.getVisibleSize().height-150;var t=e.height-this.node.height+620,i=e.height-t-400;if(i<650){var o=i/650;this.uiNodes.forEach(function(e){e.scale=o}),this.upNodes.forEach(function(e){var t=e.getComponent(cc.Widget);t.top=t.top+i-650})}},start:function(){Utils.loadHeadIcon(this.headIconSprite,LocalData.wxUserInfo.avatar,this.headIconSprite.node.width),this.nicknameLabel.string=Utils.formatNickName(LocalData.wxUserInfo.nickname),NC.addObserver(NC.KEY.CUMULATIVE_COIN_CHANGED,this.onCumulativeCoinChanged,this),NC.addObserver(NC.KEY.DIAMOND_CHANGED,this.onDiamondChanged,this),NC.addObserver(NC.KEY.COIN_CHANGED,this.onCoinChanged,this),NC.addObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this.onUnLockMasterLvChanged,this),this.schedule(this.updateForSecond,1),this.onCumulativeCoinChanged(LocalData.cumulativeCoin),this.onDiamondChanged(LocalData.diamond),this.onCoinChanged(LocalData.coin),this.onUnLockMasterLvChanged(LocalData.unlockMasterMaxLv),this.resetButteryfly(this.butterflyNode,!1),this.musicToggle.isChecked=!audioCtrl._isSilent},onDestroy:function(){NC.removeObserver(NC.KEY.CUMULATIVE_COIN_CHANGED,this),NC.removeObserver(NC.KEY.DIAMOND_CHANGED,this),NC.removeObserver(NC.KEY.COIN_CHANGED,this),NC.removeObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this)},onCumulativeCoinChanged:function(e){this.cumulativeCoinLabel.string=Utils.formatNumber(e)},onDiamondChanged:function(e){this.diamondLabel.string=Utils.formatNumber(e)},onCoinChanged:function(e){this.coinLabel.string=Utils.formatNumber(e)},onUnLockMasterLvChanged:function(e){var t=CSV.master[e],i=parseInt(t.ad_master);this.videoCtrl.reset(i)},updateForSecond:function(){var e=LocalData.solveCoinIncreaseRate();this.coinIncreaseLabel.string=Language.coin+"+"+(100*e).toFixed(0)+"%";var t=LocalData.solveSpeedUpRate();this.speedUpLabel.string=Language.speed+"x"+(t+1),cc.find("Canvas/plunder").getComponent("plundersCtrl").setSpeed(t+1);var i=LocalData.solveRewordPerSecond();this.perSecondLabel.string=Utils.formatNumber(i)+"/"+Language.second},onRankButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/rankLayer/rankLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/rankLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),Share.share()},onLotteryButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/lotteryLayer/lotteryLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/lotteryLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})},onDoubleSpeedButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/doubleSpeedLayer/doubleSpeedLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/doubleSpeedLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})},onShopButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/shopLayer/shopLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/shopLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})},onMusicToggleClick:function(e){e.isChecked?(audioCtrl.setIsSlient(!1),audioCtrl.playEffect("musicOn",!0)):(audioCtrl.setIsSlient(!0),audioCtrl.playEffect("musicOff",!0))},onHelpButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/helpLayer/helpLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/helpLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})},onByteMoreGameButtonClick:function(){audioCtrl.playEffect("musicOn"),cc.sys.platform==cc.sys.BYTE_GAME&&("ios"!==tt.getSystemInfoSync().platform?tt.showMoreGamesModal({appLaunchOptions:[{appId:"tt451c33a1da39ae2b",query:"",extraData:{}}],success:function(e){console.log("success",e.errMsg)},fail:function(e){console.log("fail",e.errMsg)}}):tt.showToast({title:"\u529f\u80fd\u6682\u4e0d\u53ef\u7528",icon:"none"}))},onTestButton1Click:function(){},resetButteryfly:function(e,t){this.butterflyNode.stopAllActions();var i,o=cc.delayTime(Config.butterflyInterval),n=this.node.height-266,s=cc.view.getVisibleSize(),a=cc.moveTo(10,s.width/2+100,n),r=cc.flipX(!0),c=cc.moveTo(10,-s.width/2-100,n),l=cc.flipX(!1),h=cc.moveTo(10,s.width/2+100,n),d=cc.flipX(!0),u=cc.moveTo(10,-s.width/2-100,n),f=cc.flipX(!1);i=t?cc.sequence(o,a,r,c,l,h,d,u,f,cc.callFunc(this.resetButteryfly,this,!0)):cc.sequence(a,r,c,l,h,d,u,f,o,cc.callFunc(this.resetButteryfly,this,!1)),this.butterflyNode.x=-s.width/2-100,this.butterflyNode.y=n,this.butterflyNode.scaleX=1,this.butterflyNode.runAction(i)},onButteryflyButtonClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/butterflyLayer/butterflyLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/butterflyLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})}}),cc._RF.pop()},{UIAddCtrl:"UIAddCtrl",UIVideoCtrl:"UIVideoCtrl",UItranscendCtrl:"UItranscendCtrl"}],UIInviteCtrl:[function(e,t){"use strict";cc._RF.push(t,"ccb00qQ1/BNxYLaNv6POdsX","UIInviteCtrl"),cc.Class({extends:cc.Component,properties:{iconNode:cc.Node,redNode:cc.Node},start:function(){NC.addObserver(NC.KEY.INVITED_DATA_CHANGED,this.onInvitedInfoChanged,this),NC.addObserver(NC.KEY.INIVITED_LAYER_CLOSE,this.onInvitedInfoChanged,this),NC.addObserver(NC.KEY.ON_GAME_SHOW,this.onGameShow,this),this.onGameShow()},onDestroy:function(){NC.removeObserver(NC.KEY.INVITED_DATA_CHANGED,this),NC.removeObserver(NC.KEY.INIVITED_LAYER_CLOSE,this),NC.removeObserver(NC.KEY.ON_GAME_SHOW,this)},onGameShow:function(){cc.log("UIInvited game Show"),Utils.getMeInvitedWho(function(e,t){e||0==cc.isValid(this.node)||(cc.log("friend",t),LocalData.updateInvitedInfo(t),this.onInvitedInfoChanged())}.bind(this))},onInvitedInfoChanged:function(){if(LocalData.isCanGetInvitedReward()){this.redNode.active=!0;var e=cc.rotateTo(.1,-10),t=cc.rotateTo(.1,10),i=cc.rotateTo(.1,-10),o=cc.rotateTo(.1,10),n=cc.rotateTo(.1,-10),s=cc.rotateTo(.05,0),a=cc.delayTime(2),r=cc.sequence(e,t,i,o,n,s,a),c=cc.repeatForever(r);this.iconNode.runAction(c)}else this.redNode.active=!1,this.iconNode.stopAllActions(),this.iconNode.rotation=0},onSelfClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/invitedLayer/invitedLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/invitedLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})}}),cc._RF.pop()},{}],UIMoreGameItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"5458fM+fcVIRZfK9AVcVsoN","UIMoreGameItemCtrl"),cc.Class({extends:cc.Component,properties:{iconSprite:cc.Sprite,nameLabel:cc.Label},_info:null,init:function(e){this._info=e,cc.sys.platform==cc.sys.BYTE_GAME&&(this.iconSprite.spriteFrame=e.spriteFrame,this.nameLabel&&(this.nameLabel.string=e.name))},onSelfClick:function(){audioCtrl.playEffect("musicOn"),cc.sys.platform==cc.sys.BYTE_GAME&&JsNativeBridge.showByteMoreGame()}}),cc._RF.pop()},{}],UIMoreNodeCtrl:[function(e,t){"use strict";cc._RF.push(t,"aea0c8mJm9CBazfzeGO4drM","UIMoreNodeCtrl"),cc.Class({extends:cc.Component,properties:{byteMoreGameIconsAtlas:cc.SpriteAtlas,moreGameItemCtrl:e("UIMoreGameItemCtrl")},onLoad:function(){cc.sys.platform==cc.sys.MEIZU_GAME&&(this.node.active=!1)},start:function(){this.updateForByteIcons(),this.schedule(this.updateForByteIcons,3,cc.macro.REPEAT_FOREVER,0);var e=cc.rotateTo(.1,-10),t=cc.rotateTo(.1,10),i=cc.rotateTo(.1,-10),o=cc.rotateTo(.1,10),n=cc.rotateTo(.1,-10),s=cc.rotateTo(.05,0),a=cc.delayTime(2),r=cc.sequence(e,t,i,o,n,s,a),c=cc.repeatForever(r);this.moreGameItemCtrl.node.runAction(c)},updateForByteIcons:function(){var e=_.sample(this.byteMoreGameIconsAtlas.getSpriteFrames());this.moreGameItemCtrl.init({spriteFrame:e,name:"\u66f4\u591a\u6e38\u620f"})}}),cc._RF.pop()},{UIMoreGameItemCtrl:"UIMoreGameItemCtrl"}],UISigninCtrl:[function(e,t){"use strict";cc._RF.push(t,"f5db7bC/4pChoNaMMX3oa8S","UISigninCtrl"),cc.Class({extends:cc.Component,properties:{redNode:cc.Node,iconNode:cc.Node},onLoad:function(){},start:function(){NC.addObserver(NC.KEY.SIGNIN_DATA_CHANGED,this.onSigninChanged,this),NC.addObserver(NC.KEY.OFFLINE_REWARD_LAYER_CLOSE,this.onOfflineRewardLayerClose,this),this.onSigninChanged()},onDestroy:function(){NC.removeObserver(NC.KEY.SIGNIN_DATA_CHANGED,this),NC.removeObserver(NC.KEY.OFFLINE_REWARD_LAYER_CLOSE,this)},onSigninChanged:function(){if(Utils.offsetDay(LocalData.signinGetTime,Utils.getCurTime())>0){this.redNode.active=!0;var e=cc.rotateTo(.1,-10),t=cc.rotateTo(.1,10),i=cc.rotateTo(.1,-10),o=cc.rotateTo(.1,10),n=cc.rotateTo(.1,-10),s=cc.rotateTo(.05,0),a=cc.delayTime(2),r=cc.sequence(e,t,i,o,n,s,a),c=cc.repeatForever(r);this.iconNode.runAction(c)}else this.redNode.active=!1,this.iconNode.stopAllActions(),this.iconNode.rotation=0},onOfflineRewardLayerClose:function(){Utils.offsetDay(LocalData.signinGetTime,Utils.getCurTime())>0&&Utils.loadResWithCorrection("Prefab/signinLayer/signinLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/signinLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})},onSelfClick:function(){audioCtrl.playEffect("musicOn"),Utils.loadResWithCorrection("Prefab/signinLayer/signinLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/signinLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}})}}),cc._RF.pop()},{}],UIVideoCtrl:[function(e,t){"use strict";cc._RF.push(t,"6c986r8AzRGnqcdl/Hb23RV","UIVideoCtrl"),cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,buttonSprite:cc.Sprite,videoFrame:cc.SpriteFrame,shareFrame:cc.SpriteFrame,videoFreeMasterIcon:cc.Sprite,masterAtlas:cc.SpriteAtlas,buttonType:""},onLoad:function(){this.schedule(this.updateForTime,.5),this.updateForTime(0),Utils.setNodeJellyForever(this.videoFreeMasterIcon.node)},reset:function(e){this.canVideoGetLv=e,this.videoFreeMasterIcon.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+e)},onSelfClick:function(){audioCtrl.playEffect("musicOn"),"cd"!=this.buttonType?0!=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl").hasEnoughCell()?"video"==this.buttonType?AD.showVideo(function(e){if(e)Utils.showToast(e);else{var t=LocalData.unlockMasterMaxLv,i=CSV.master[t],o=parseInt(i.ad_master),n=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");n.hasEnoughCell()?(n.putEgg(o,-3),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u3010\u91d1\u86cb\u4e00\u9897\u3011")):(Utils.showToast("\u4f4d\u7f6e\u4e0d\u591f\u4e86\uff0c\u83b7\u5f97\u91d1\u86cb\u5c06\u5728\u6709\u7a7a\u4f4d\u65f6\u7b2c\u4e00\u65f6\u95f4\u53d1\u653e"),LocalData.putStorageEgg({eggType:-3,lv:o})),LocalData.freeVideoMasterTime=Utils.getCurTime(),Config.resetRewardType(Config.PAGE_NAMES.freeMonst),this.updateForTime(0)}}.bind(this),"\u5e7f\u544a-\u514d\u8d39\u5c0f\u602a\u7269",null,"adTimeForFreeMaster"):"share"==this.buttonType&&Share.share(function(e){if(e)Utils.showToast(e);else{var t=LocalData.unlockMasterMaxLv,i=CSV.master[t],o=parseInt(i.ad_master),n=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");n.hasEnoughCell()?n.putEgg(o,-3):(Utils.showToast("\u4f4d\u7f6e\u4e0d\u591f\u4e86\uff0c\u83b7\u5f97\u91d1\u86cb\u5c06\u5728\u6709\u7a7a\u4f4d\u65f6\u7b2c\u4e00\u65f6\u95f4\u53d1\u653e"),LocalData.putStorageEgg({eggType:-3,lv:o})),LocalData.freeVideoMasterTime=Utils.getCurTime(),Config.resetRewardType(Config.PAGE_NAMES.freeMonst),this.updateForTime(0)}}.bind(this),"\u5206\u4eab-\u514d\u8d39\u5c0f\u602a\u7269",null,"shareTimeForFreeMatser"):Utils.showToast("\u4f4d\u7f6e\u4e0d\u591f"):Utils.showToast("\u514d\u8d39\u602a\u7269\u51b7\u5374\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")},updateForTime:function(){var e=Utils.getCurTime()-LocalData.freeVideoMasterTime;if(e<120){var t=120-e;this.timeLabel.string=moment(1e3*t).format("mm:ss"),this.buttonType="cd","ad"==Config.getRewardType(Config.PAGE_NAMES.freeMonst)?this.buttonSprite.spriteFrame=this.videoFrame:this.buttonSprite.spriteFrame=this.shareFrame,this.buttonSprite.node.color=cc.color(200,200,200,255)}else this.timeLabel.string="\u514d\u8d39\u602a\u7269",this.buttonSprite.node.color=cc.color(255,255,255,255),Config.getRewardType(Config.PAGE_NAMES.freeMonst),this.buttonType="video",this.buttonSprite.spriteFrame=this.videoFrame},start:function(){}}),cc._RF.pop()},{}],UItranscendCtrl:[function(e,t){"use strict";cc._RF.push(t,"09f34C3P/JETq2rxBIYwJJF","UItranscendCtrl"),cc.Class({extends:cc.Component,properties:{},start:function(){},reset:function(){}}),cc._RF.pop()},{}],aboutLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"1a7feOwanpE3aOTBpXTR+QX","aboutLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node},onLoad:function(){Utils.adaptNode(this.bgNode),Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)}}),cc._RF.pop()},{}],aboutNodeCtrl:[function(e,t){"use strict";cc._RF.push(t,"295c2thSipJ4LCZ1xiVhMLz","aboutNodeCtrl"),cc.Class({extends:cc.Component,properties:{_tickTime:0},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},startTickTime:function(){this._tickTime=0,this.schedule(this.updateForTime,.5)},onTouchBegan:function(e){null==this._touchID&&(this._touchID=e.getID(),this.startTickTime())},onTouchMoved:function(){},onTouchEnded:function(e){this._touchID==e.getID()&&(this.endTickTime(),this._touchID=null)},onTouchCanceled:function(e){this._touchID==e.getID()&&(this.endTickTime(),this._touchID=null)},endTickTime:function(){this._tickTime=0,this.unschedule(this.updateForTime)},updateForTime:function(e){this._tickTime+=e,cc.log("aoutLayer ",this._tickTime),this._tickTime>=5&&(this.endTickTime(),Utils.loadResWithCorrection("Prefab/aboutLayer/aboutLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/aboutLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}}))}}),cc._RF.pop()},{}],butterflLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"3bba9u0NNlMDKFj/HA4x/br","butterflLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,videoNode:cc.Node,shareNode:cc.Node,butterflyAtlas:cc.SpriteAtlas,iconSprite:cc.Sprite,titleLabel:cc.Label,descLabel:cc.Label,type:""},onLoad:function(){Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){AD.showBanner(),"ad"==Config.getRewardType(Config.PAGE_NAMES.butterfly)?this.videoNode.active=!0:this.videoNode.active=!1,this.shareNode.active=!this.videoNode.active,Math.random()<=.5?this.type="egg":this.type="coin";var e={egg:{title:"\u9ec4\u91d1\u86cb\nx4",desc:"\u83b7\u5f97\u56db\u4e2a\u9ec4\u91d1\u86cb"},coin:{title:"\u602a\u7269\u6536\u76ca\nx5",desc:"5\u500d\u6536\u76ca\u6301\u7eed60\u79d2"}};this.titleLabel.string=e[this.type].title,this.descLabel.string=e[this.type].desc,this.iconSprite.spriteFrame=this.butterflyAtlas.getSpriteFrame("butterflyLayer_"+this.type)},onDestroy:function(){AD.hideBanner()},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},onVideoButtonClick:function(){audioCtrl.playEffect("musicOn");var e=cc.find("Canvas/UI").getComponent("UICtrl");e.resetButteryfly(e.buyButtonNode,!0),AD.showVideo(function(e){if(e)Utils.showToast(e);else{if("coin"==this.type)LocalData.addNewCoinIncreaseRate(60,4),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u4e86\u91d1\u5e01\u52a0\u6210"),Utils.outAction(this.node,this.bgNode,this.blockNode),Utils.loadResWithCorrection("Prefab/coinRainLayer/coinRainLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{var i=cc.instantiate(t);i.zIndex=1,i.parent=cc.find("Canvas")}});else{for(var t=!1,i=parseInt(CSV.master[LocalData.unlockMasterMaxLv].ad_egg),o=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl"),n=0;n<4;n++)o.hasEnoughCell()?o.putEgg(i,-3):(LocalData.putStorageEgg({eggType:-3,lv:i}),t=!0);t&&setTimeout(function(){Utils.showToast("\u4f4d\u7f6e\u4e0d\u591f\u4e86\uff0c\u5269\u4e0b\u7684\u91d1\u86cb\u5c06\u5728\u6709\u591a\u4f59\u4f4d\u7f6e\u65f6\uff0c\u53ca\u65f6\u53d1\u653e")},1e3),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u4e86\u91d1\u86cb\u5956\u52b1"),Utils.outAction(this.node,this.bgNode,this.blockNode)}Config.resetRewardType(Config.PAGE_NAMES.butterfly)}}.bind(this),"\u5e7f\u544a-\u8774\u8776\u5927\u793c\u5305",null)},onShareButtonClick:function(){audioCtrl.playEffect("musicOn");var e=cc.find("Canvas/UI").getComponent("UICtrl");e.resetButteryfly(e.buyButtonNode,!0),Share.share(function(e){if(e)Utils.showToast(e);else{if("coin"==this.type)LocalData.addNewCoinIncreaseRate(60,4),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u4e86\u91d1\u5e01\u52a0\u6210"),Utils.outAction(this.node,this.bgNode,this.blockNode),Utils.loadResWithCorrection("Prefab/coinRainLayer/coinRainLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{var i=cc.instantiate(t);i.zIndex=1,i.parent=cc.find("Canvas")}});else{for(var t=!1,i=parseInt(CSV.master[LocalData.unlockMasterMaxLv].ad_egg),o=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl"),n=0;n<4;n++)o.hasEnoughCell()?o.putEgg(i,-3):(LocalData.putStorageEgg({eggType:-3,lv:i}),t=!0);t&&setTimeout(function(){Utils.showToast("\u4f4d\u7f6e\u4e0d\u591f\u4e86\uff0c\u5269\u4e0b\u7684\u91d1\u86cb\u5c06\u5728\u6709\u591a\u4f59\u4f4d\u7f6e\u65f6\uff0c\u53ca\u65f6\u53d1\u653e")},1e3),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u4e86\u91d1\u86cb\u5956\u52b1"),Utils.outAction(this.node,this.bgNode,this.blockNode)}Config.resetRewardType(Config.PAGE_NAMES.butterfly)}}.bind(this),"\u5206\u4eab-\u8774\u8776\u5927\u793c\u5305")}}),cc._RF.pop()},{}],byteWaterFlowNodeCtrl:[function(e,t){"use strict";cc._RF.push(t,"d038c48e6NPv6qQKQ3KdXyx","byteWaterFlowNodeCtrl"),cc.Class({extends:cc.Component,properties:{moreGameSpriteAtlas:cc.SpriteAtlas},start:function(){for(var e=this.moreGameSpriteAtlas.getSpriteFrames(),t=_.sample(e,e.length),i=0;i<this.node.children.length;i++){var o=t.pop();null==o&&(o=(t=_.sample(e,e.length)).pop()),this.node.children[i].getComponent(cc.Sprite).spriteFrame=o}},update:function(){var e=cc.v2(this.node.position);e.x-=1,e.x<=-460&&(e.x=530),this.node.position=e},onSelfClick:function(){audioCtrl.playEffect("musicOn"),cc.sys.platform==cc.sys.BYTE_GAME&&JsNativeBridge.showByteMoreGame()}}),cc._RF.pop()},{}],castleCtrl:[function(e,t){"use strict";cc._RF.push(t,"e98beJrHA9F3IhThd11BouS","castleCtrl"),cc.Class({extends:cc.Component,properties:{castleSprite:cc.Sprite,progressBar:cc.ProgressBar,lv:0,lvLabel:cc.Label,remainLabel:cc.Label},start:function(){},init:function(e,t){this.onCastleLvChanged(e),this.onCastleRemainCoinChanged(t),NC.addObserver(NC.KEY.CASTLE_LV_CHANGED,this.onCastleLvChanged,this),NC.addObserver(NC.KEY.CASTLE_REMAIN_COIN_CHANGED,this.onCastleRemainCoinChanged,this)},onDestroy:function(){NC.removeObserver(NC.KEY.CASTLE_LV_CHANGED,this),NC.removeObserver(NC.KEY.CASTLE_REMAIN_COIN_CHANGED,this)},onCastleLvChanged:function(e){var t=this;this.lv!=e&&(this.lv=e,this.lvLabel.string=e,Utils.loadResWithCorrection("Castles/"+e,cc.SpriteFrame,function(i,o){i?cc.log("\u52a0\u8f7d\u57ce\u5821\u8d44\u6e90\u51fa\u9519\u4e86\uff01:",e):t.castleSprite.spriteFrame=o}),this.onCastleRemainCoinChanged(LocalData.castleRmainCoin))},onCastleRemainCoinChanged:function(e){if(LocalData.castleLv>=Config.castleMaxLv)this.remainLabel.string=Language.infinite,this.progressBar.progress=1,LocalData.castleLv=Config.castleMaxLv;else{this.remainLabel.string=Utils.formatNumber(e);var t=CSV.castle[parseInt(LocalData.castleLv)].coin;t=parseFloat(t),this.progressBar.progress=e/t}}}),cc._RF.pop()},{}],coinLackLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"676c4YjStJAq7j89R+bY3/G","coinLackLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,videoNode:cc.Node,shareNode:cc.Node,coinLabel:cc.Label,coinNum:0,isComplete:!1},onLoad:function(){Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){AD.showBanner(),"ad"==Config.getRewardType(Config.PAGE_NAMES.coinLack)?this.videoNode.active=!0:this.videoNode.active=!1,this.shareNode.active=!this.videoNode.active;var e=cc.find("Canvas/UI/addButton").getComponent("UIAddCtrl").canBuyLv;this.coinNum=LocalData.solveMasterConstCoin(e),this.coinLabel.string=Utils.formatNumber(this.coinNum)},onDestroy:function(){this.isComplete&&(Utils.showToast("\u606d\u559c\u83b7\u5f97\u5956\u52b1"),LocalData.addCoin(this.coinNum)),AD.hideBanner()},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},onADButtonClick:function(){audioCtrl.playEffect("musicOn"),AD.showVideo(function(e){e?Utils.showToast(e):(this.isComplete=!0,Utils.outAction(this.node,this.bgNode,this.blockNode),Config.resetRewardType(Config.PAGE_NAMES.coinLack))}.bind(this),"\u5e7f\u544a-\u91d1\u5e01\u4e0d\u8db3\u8865\u5145",null,"adTimeForCoinLack")},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),Share.share(function(e){e?Utils.showToast(e):(this.isComplete=!0,Utils.outAction(this.node,this.bgNode,this.blockNode),Config.resetRewardType(Config.PAGE_NAMES.coinLack))}.bind(this),"\u5206\u4eab-\u91d1\u5e01\u4e0d\u8db3\u8865\u5145",null,"shareTimeForCoinLack")}}),cc._RF.pop()},{}],coinRainLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"18219a0jClKmL3UjHnN2elb","coinRainLayerCtrl"),cc.Class({extends:cc.Component,properties:{coinItem:cc.Prefab},start:function(){for(var e=0;e<10;e++)this.createCoin(!0);this.schedule(function(){this.createCoin(!1)},.2),setTimeout(function(){cc.isValid(this.node)&&this.node.destroy()}.bind(this),1e4)},createCoin:function(e){var t,i=cc.instantiate(this.coinItem),o=cc.view.getVisibleSize(),n=(Math.random()-.5)*o.width*1;t=e?(Math.random()-.5)*o.height*1:Math.random()*o.height*.8;var s=cc.moveBy(3,0,-o.height),a=cc.callFunc(function(e){e.destroy()});i.x=n,i.y=t,i.parent=this.node,i.runAction(cc.sequence(s,a))}}),cc._RF.pop()},{}],dialogCtrl:[function(e,t){"use strict";cc._RF.push(t,"23849BdlwBA+aCaGBzUK9sc","dialogCtrl"),cc.Class({extends:cc.Component,properties:{count:0},onLoad:function(){this.node.zIndex=9999},show:function(e,t){this.count+=e,this.count>0&&(this.node.active=!0,cc.find("label",this.node).getComponent(cc.Label).string=t)},hide:function(e){this.count-=e,this.count<=0&&(this.node.active=!1)},hideImmediately:function(){this.count=0,this.node.active=!1}}),cc._RF.pop()},{}],doubleSpeedLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"e64806LRKlFWbeIlC15dslp","doubleSpeedLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,remainTimeLabel:cc.Label,remainTimeBar:cc.ProgressBar,adNode:cc.Node,shareNode:cc.Node},onLoad:function(){Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){AD.showBanner(),this.updateForRemainTime(),this.schedule(this.updateForRemainTime,.5),NC.addObserver(NC.KEY.REWARD_TYPE_CHANGED,this.onRewardTypeChanged,this),this.onRewardTypeChanged({pageName:Config.PAGE_NAMES.doubleSpeed,rewardType:Config.getRewardType(Config.PAGE_NAMES.doubleSpeed)})},onDestroy:function(){AD.hideBanner(),NC.removeObserver(NC.KEY.REWARD_TYPE_CHANGED,this)},onRewardTypeChanged:function(e){e.pageName==Config.PAGE_NAMES.doubleSpeed&&("ad"==e.rewardType?this.adNode.active=!0:this.adNode.active=!1,this.shareNode.active=!this.adNode.active)},updateForRemainTime:function(){var e=LocalData.getSpeedUpRemainTimeByVideo();this.remainTimeLabel.string=this._formatTime(e);var t=840*parseInt(CSV.system[2].num);this.remainTimeBar.progress=e/t},onADButtonClick:function(){audioCtrl.playEffect("musicOn"),AD.showVideo(function(e){if(e)Utils.showToast(e);else{var t=60*parseInt(CSV.system[2].num),i=LocalData.getSpeedUpRemainTimeByVideo(),o=840*parseInt(CSV.system[2].num);i+t>o&&(t=o-i),LocalData.proceedOldSpeedUpRate(t,1,"video"),Config.resetRewardType(Config.PAGE_NAMES.doubleSpeed)}}.bind(this),"\u5e7f\u544a-\u53cc\u500d\u901f\u5ea65\u5206\u949f")},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),Share.share(function(e){if(e)Utils.showToast(e);else{var t=60*parseInt(CSV.system[2].num),i=LocalData.getSpeedUpRemainTimeByVideo(),o=840*parseInt(CSV.system[2].num);i+t>o&&(t=o-i),LocalData.proceedOldSpeedUpRate(t,1,"video"),Config.resetRewardType(Config.PAGE_NAMES.doubleSpeed)}}.bind(this),"\u5206\u4eab-\u53cc\u500d\u901f\u5ea65\u5206\u949f")},_formatTime:function(e){return moment(1e3*e-288e5).format("HH:mm:ss")},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode),LocalData.save()}}),cc._RF.pop()},{}],freeUpgradeLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"ff6beqxapBCtojqyLPR4gvI","freeUpgradeLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,isADComplete:!1,masterAtlas:cc.SpriteAtlas,fromMasterIcon:cc.Sprite,fromMasterLabel:cc.Label,toMasterIcon:cc.Sprite,toMasterLabel:cc.Label,arrowNode:cc.Node,costNumber:0,adNode:cc.Node,shareNode:cc.Node},onLoad:function(){Utils.adaptNode(this.fixedNode)},start:function(){NC.postNotice(NC.KEY.CAN_PUT_FREE_EGG,!1),"ad"==Config.getRewardType(Config.PAGE_NAMES.freeUpgrade)?this.adNode.active=!0:this.adNode.active=!1,this.shareNode.active=!this.adNode.active},init:function(e,t,i){this.fromLv=e,this.toLv=t,this.costNumber=i;var o=CSV.master[e];this.fromMasterIcon.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+e),this.fromMasterLabel.string="LV"+e+o.name;var n=CSV.master[t];this.toMasterIcon.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+t),this.toMasterLabel.string="LV"+t+n.name;var s=cc.repeatForever(cc.sequence(cc.moveTo(.5,0,28),cc.moveTo(.5,0,8)));this.arrowNode.runAction(s)},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),this.node.destroy()},onADButtonClick:function(){audioCtrl.playEffect("musicOn"),AD.showVideo(function(e){e?Utils.showToast(e):(this.isADComplete=!0,this.node.destroy(),Config.resetRewardType(Config.PAGE_NAMES.freeUpgrade))}.bind(this),"\u5e7f\u544a-\u514d\u8d39\u5347\u7ea7\u602a\u7269")},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),Share.share(function(e){e?Utils.showToast(e):(this.isADComplete=!0,this.node.destroy(),Config.resetRewardType(Config.PAGE_NAMES.freeUpgrade))}.bind(this),"\u5206\u4eab-\u514d\u8d39\u5347\u7ea7\u602a\u7269")},onDestroy:function(){NC.postNotice(NC.KEY.CAN_PUT_FREE_EGG,!0);var e=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");e.hasEnoughCell()?(LocalData.subCoin(this.costNumber),LocalData.addMasterBuyTimes(this.fromLv,1),this.isADComplete?(Utils.showToast("\u606d\u559c\u83b7\u5f97\u66f4\u9ad8\u7ea7\u7684\u602a\u7269"),e.putEgg(this.toLv,-2)):e.putEgg(this.fromLv,-2)):Utils.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u4f4d\u7f6e\u4e86"),LocalData.save()}}),cc._RF.pop()},{}],grayCtrl:[function(e,t){"use strict";cc._RF.push(t,"f8f99uABOpKwqkYzB9uahav","grayCtrl"),cc.Class({extends:cc.Component,properties:{maskNode:cc.Node,halfBlockNode:cc.Node,handNode:cc.Node,operationType:""},onLoad:function(){var e=cc.view.getVisibleSize();this.halfBlockNode.width=3*e.width,this.halfBlockNode.height=3*e.height},start:function(){},hide:function(){this.node.active=!1},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCanceled,this)},guideClick:function(e,t,i,o){this.node.active=!0,this._clickFun=i,this._clickTarget=o,this.operationType="click";var n=cc.view.getVisibleSize();e.x-=n.width/2,e.y-=n.height/2,this.maskNode.position=e,this.maskNode.size=t,this.handNode.active=!0,this.handNode.position=e;var s=cc.moveTo(.5,e.x,e.y+10),a=cc.moveTo(.5,e.x,e.y-10),r=cc.sequence(s,a),c=cc.repeatForever(r);this.handNode.stopAllActions(),this.handNode.runAction(c)},guideLook:function(e,t){this.node.active=!0,this.operationType="look";var i=cc.view.getVisibleSize();e.x-=i.width/2,e.y-=i.height/2,this.maskNode.position=e,this.maskNode.size=t,this.handNode.active=!1},guideDrag:function(e,t,i,o,n){this.node.active=!0,this.operationType="drag",this._targetCom=i;var s=cc.view.getVisibleSize();e.x-=s.width/2,e.y-=s.height/2,this.maskNode.position=e,this.maskNode.size=t,o.x-=s.width/2,o.y-=s.height/2,n.x-=s.width/2,n.y-=s.height/2,this.handNode.active=!0;var a=cc.place(o),r=cc.moveTo(2,n),c=cc.delayTime(1),l=cc.sequence(a,r,c),h=cc.repeatForever(l);this.handNode.stopAllActions(),this.handNode.runAction(h)},onTouchBegan:function(e){e.stopPropagation(),null==this._touchID&&(this._touchID=e.getID(),"click"==this.operationType?this._isClickHit=this.maskNode._hitTest(e.getLocation()):"drag"==this.operationType&&this._targetCom&&this._targetCom.onTouchBegan(e))},onTouchMoved:function(e){this._touchID==e.getID()&&"drag"==this.operationType&&this._targetCom&&this._targetCom.onTouchMoved(e)},onTouchEnded:function(e){this._touchID==e.getID()&&("click"==this.operationType?(this._isClickHit=this._isClickHit&&this.maskNode._hitTest(e.getLocation()),this._isClickHit&&this._clickFun&&this._clickFun.call(this._clickTarget),this._isClickHit=null):"drag"==this.operationType&&this._targetCom&&this._targetCom.onTouchEnded(e),this._touchID=null)},onTouchCanceled:function(e){this._touchID==e.getID()&&("drag"==this.operationType&&this._targetCom&&this._targetCom.onTouchCanceled(e),this._touchID=null)}}),cc._RF.pop()},{}],guideCtrl:[function(e,t){"use strict";cc._RF.push(t,"a344bg70YJOh6lUCDgk4Exc","guideCtrl"),cc.Class({extends:cc.Component,properties:{personCtrl:e("personCtrl"),grayCtrl:e("grayCtrl")},start:function(){},begin:function(){NC.postNotice(NC.KEY.CAN_PUT_FREE_EGG,!1),this.personCtrl.showMessage("\u6b32\u5f97\u91d1\u5e01\uff0c\u5148\u4e70\u602a\u7269\uff01",this.focusAddButton,this)},focusAddButton:function(){var e=cc.find("Canvas/UI/addButton").convertToWorldSpaceAR(cc.v2(0,0)),t=cc.size(300,300);this.grayCtrl.guideClick(e,t,this.onAddButtonClick,this)},onAddButtonClick:function(){audioCtrl.playEffect("musicOn"),LocalData.subCoin(100);var e=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");e.putEgg(1,-2,2);var t=e.node.children[0].convertToWorldSpaceAR(cc.v2(0,0)),i=cc.size(200*e.node.scale,200*e.node.scale);this.grayCtrl.guideLook(t,i);var o=cc.delayTime(3),n=cc.callFunc(this.showGetFirstEgg,this);this.node.runAction(cc.sequence(o,n))},showGetFirstEgg:function(){this.grayCtrl.hide(),this.personCtrl.showMessage("\u8d2d\u4e70\u602a\u7269\u53ea\u662f\u6211\u4eec\u7684\u8fc8\u51fa\u7684\u7b2c\u4e00\u6b65\u3002\u5bf9\u6e38\u620f\u4e2d\u6709\u4efb\u4f55\u4e0d\u61c2\u7684\u5730\u65b9\uff0c\u90fd\u53ef\u4ee5\u70b9\u51fb\u300a\u600e\u4e48\u73a9\u300b\u6309\u94ae\u54e6\u3002",this.showHelpLayer,this)},showHelpLayer:function(){this.end(),Utils.loadResWithCorrection("Prefab/helpLayer/helpLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/helpLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}}),cc.sys.platform==cc.sys.WECHAT_GAME&&boatSDK.ald.sendEvent("\u65b0\u624b\u5f15\u5bfc\u5b8c\u6210")},end:function(){var e=cc.find("Canvas/UI").getComponent("UICtrl");e.resetButteryfly(e.butterflyNode,!1),this.node.destroy()}}),cc._RF.pop()},{grayCtrl:"grayCtrl",personCtrl:"personCtrl"}],helpLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"74fdcTX8qlJqoASRhBg8O3e","helpLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node},onLoad:function(){Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)}}),cc._RF.pop()},{}],inivitedTableViewCtrl:[function(e,t){"use strict";cc._RF.push(t,"95962OIiupNT6S7006fL14U","inivitedTableViewCtrl");var i=cc.Enum({NEW_PLAYER:"newPlayer",OLD_PLAYER:"oldPlayer"});cc.Class({extends:e("TableViewCtrlH"),properties:{type:i.NEW_PLAYER},start:function(){},init:function(e){if(this._sourceData=e,this._sourceData.length<3)for(;this._sourceData.length<4;)this._sourceData.push("0"),this._sourceData.push("1");else this._sourceData.unshift("1"),this._sourceData.unshift("0");this.scrollView.node.active=!0,this.reload()},getItem:function(e){var t=this._reuseArray.pop();return null==t&&(t=cc.instantiate(this.itemPrefab)),t.getComponent(this.itemCtrlName).reuse(this.type,this._sourceData[e]),t},onDestroy:function(){this.clearReuserArray()}}),cc._RF.pop()},{TableViewCtrlH:"TableViewCtrlH"}],invitedItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"36f8eDLVKRJS5UKRekdXeKQ","invitedItemCtrl"),cc.Class({extends:cc.Component,properties:{type:"",state:"",newPlayerBgFrame:cc.SpriteFrame,oldPlayerBgFrame:cc.SpriteFrame,bgSprite:cc.Sprite,headIconSprite:cc.Sprite,defaultHeadFrame:cc.SpriteFrame,pyqFrame:cc.SpriteFrame,diamondLabel:cc.Label,buttonSprite:cc.Sprite,buttonYellowFrame:cc.SpriteFrame,buttonGreenFrame:cc.SpriteFrame,buttonLabel:cc.Label,buttonLabelOutLine:cc.LabelOutline},start:function(){},onDestroy:function(){NC.removeObserver(NC.KEY.GET_ALL_INIVITED_REWARD,this)},reuse:function(e,t){if(this.type=e,"newPlayer"==e?(this.bgSprite.spriteFrame=this.newPlayerBgFrame,this.diamondLabel.string=30):(this.bgSprite.spriteFrame=this.oldPlayerBgFrame,this.diamondLabel.string=15),this.openid=t,"0"==t)this.state="invited",this.avatar="",this.headIconSprite.spriteFrame=this.defaultHeadFrame,this.buttonSprite.spriteFrame=this.buttonGreenFrame,this.buttonLabel.string="\u9080\u8bf7",this.buttonLabelOutLine.color=cc.color(63,99,0);else if("1"==t)this.state="pyq",this.avatar="",this.headIconSprite.spriteFrame=this.pyqFrame,this.buttonSprite.spriteFrame=this.buttonGreenFrame,this.buttonLabel.string="\u670b\u53cb\u5708",this.buttonLabelOutLine.color=cc.color(63,99,0);else{var i=LocalData.invitedInfo[t],o=i.info.avatar;this.avatar=o,Utils.loadHeadIconAndVerification(this.headIconSprite,o,this.headIconSprite.node.width,function(){return this.avatar==o}.bind(this)),this.buttonSprite.spriteFrame=this.buttonYellowFrame,this.buttonLabelOutLine.color=cc.color(255,5,55),Utils.offsetDay(i.getRewardTime,Utils.getCurTime())>0&&i.oldData.count<i.newData.count?(this.state="canGet",this.buttonLabel.string="\u9886\u53d6"):(this.state="alreadyGet",this.buttonLabel.string="\u5df2\u9886\u53d6")}NC.addObserver(NC.KEY.GET_ALL_INIVITED_REWARD,this.onGetAllInivitedReward,this)},unuse:function(){this.avatar="",this.headIconSprite.spriteFrame=this.defaultHeadFrame,NC.removeObserver(NC.KEY.GET_ALL_INIVITED_REWARD,this)},onSelfClick:function(){audioCtrl.playEffect("musicOn");var e="newPlayer"==this.type?30:15;"canGet"==this.state?(LocalData.diamond+=e,LocalData.getInvitedRewardAndReset(this.openid),this.reuse(this.type,this.openid),Utils.showToast("\u606d\u559c\u83b7\u5f97\u5956\u52b1\u3010\u94bb\u77f3x"+e+"\u3011")):"pyq"==this.state?Utils.loadResWithCorrection("Prefab/pyqLayer/pyqLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{if(cc.find("Canvas/pyqLayer"))return;cc.instantiate(t).parent=cc.find("Canvas")}}):Share.share()},onGetAllInivitedReward:function(){this.reuse(this.type,this.openid)}}),cc._RF.pop()},{}],invitedLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"117e7ION7VDWZLOYmZMTHSH","invitedLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,diamondNode:cc.Node,diamondLabel:cc.Label,newTableCtrl:e("inivitedTableViewCtrl"),oldTableCtrl:e("inivitedTableViewCtrl"),doubleAdNode:cc.Node,doubleShareNode:cc.Node},onLoad:function(){Utils.adaptNode(this.fixedNode)},start:function(){var e=[],t=[];for(var i in LocalData.invitedInfo)if(LocalData.invitedInfo.hasOwnProperty(i)){var o=LocalData.invitedInfo[i],n=Utils.offsetDay(o.getRewardTime,Utils.getCurTime());n>0&&o.newData.count>o.oldData.count?1==o.oldData.isFirst?e.unshift(i):t.unshift(i):0==n&&("newPlayer"==o.oldData.lastGetRewardType?e.push(i):t.push(i))}this.newTableCtrl.init(e),this.oldTableCtrl.init(t);var s=cc.view.getVisibleSize();if(cc.sys.platform==cc.sys.WECHAT_GAME){var a=wx.getSystemInfoSync();Utils.isIPhoneX(a.model)?(this.diamondNode.x=-487,this.diamondNode.y=s.height/2-144):(this.diamondNode.x=-487,this.diamondNode.y=s.height/2-44)}else this.diamondNode.x=-487,this.diamondNode.y=s.height/2-44;NC.addObserver(NC.KEY.DIAMOND_CHANGED,this.onDiamondChanged,this),this.onDiamondChanged(LocalData.diamond),"ad"==Config.getRewardType(Config.PAGE_NAMES.inivited)?this.doubleAdNode.active=!0:this.doubleAdNode.active=!1,this.doubleShareNode.active=!this.doubleAdNode.active},onCloseButtonClick:function(){this.node.destroy(),NC.postNotice(NC.KEY.INIVITED_LAYER_CLOSE)},onDestroy:function(){NC.removeObserver(NC.KEY.DIAMOND_CHANGED,this)},onDoubleAdButtonClick:function(){audioCtrl.playEffect("musicOn"),0==LocalData.isCanGetInvitedReward()?Utils.showToast("\u6ca1\u6709\u53ef\u4ee5\u9886\u53d6\u7684\u5956\u52b1"):AD.showVideo(function(e){if(e)Utils.showToast(e);else{var t=LocalData.getAllInvitedRewardAndReset();t+=t,LocalData.diamond+=t,Utils.showToast("\u606d\u559c\u83b7\u5f97\u4e86\u3010\u53cc\u500d\u9080\u8bf7\u5956\u52b1 \u94bb\u77f3x"+t+"\u3011"),NC.postNotice(NC.KEY.GET_ALL_INIVITED_REWARD),Config.resetRewardType(Config.PAGE_NAMES.inivited)}}.bind(this),"\u5e7f\u544a-\u53cc\u500d\u9080\u8bf7\u5956\u52b1")},onDoubleShareButtonClick:function(){audioCtrl.playEffect("musicOn"),0==LocalData.isCanGetInvitedReward()?Utils.showToast("\u6ca1\u6709\u53ef\u4ee5\u9886\u53d6\u7684\u5956\u52b1"):Share.share(function(e){if(e)Utils.showToast(e);else{var t=LocalData.getAllInvitedRewardAndReset();t+=t,LocalData.diamond+=t,Utils.showToast("\u606d\u559c\u83b7\u5f97\u4e86\u3010\u53cc\u500d\u9080\u8bf7\u5956\u52b1 \u94bb\u77f3x"+t+"\u3011"),NC.postNotice(NC.KEY.GET_ALL_INIVITED_REWARD),Config.resetRewardType(Config.PAGE_NAMES.inivited)}}.bind(this),"\u5206\u4eab-\u53cc\u500d\u9080\u8bf7\u5956\u52b1")},onSingleButtonClick:function(){if(audioCtrl.playEffect("musicOn"),0==LocalData.isCanGetInvitedReward())Utils.showToast("\u6ca1\u6709\u53ef\u4ee5\u9886\u53d6\u7684\u5956\u52b1");else{var e=LocalData.getAllInvitedRewardAndReset();LocalData.diamond+=e,Utils.showToast("\u606d\u559c\u83b7\u5f97\u4e86\u3010\u9080\u8bf7\u5956\u52b1 \u94bb\u77f3x"+e+"\u3011"),NC.postNotice(NC.KEY.GET_ALL_INIVITED_REWARD)}},onDiamondChanged:function(e){this.diamondLabel.string=e}}),cc._RF.pop()},{inivitedTableViewCtrl:"inivitedTableViewCtrl"}],labelTickHelper:[function(e,t){"use strict";cc._RF.push(t,"40739AgJqlDGIycUJiCEe2f","labelTickHelper"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},startLabelTick:function(e,t,i,o,n,s,a){s=null==s||s,a=a||0,this["fun"+n]=this._updateLabel.bind(this,e,o,n),this["startValue"+n]=t,this["endValue"+n]=i,this["current"+n]=0,this["isFormat"+n]=s,this["digit"+n]=a,this.schedule(this["fun"+n],0)},stopLabelTick:function(e){this["fun"+e]&&(this.unschedule(this["fun"+e]),this["fun"+e]=null)},_updateLabel:function(e,t,i,o){if(this["current"+i]+=o,this["current"+i]>=t)this.stopLabelTick(i),0==this["isFormat"+i]?e.string=parseInt(this["endValue"+i]):e.string=Utils.formatNumForLimousine(this["endValue"+i],this["digit"+i]);else{var n=this["current"+i]/t*(this["endValue"+i]-this["startValue"+i])+this["startValue"+i];0==this["isFormat"+i]?e.string=parseInt(n):e.string=Utils.formatNumForLimousine(parseInt(n),this["digit"+i])}}}),cc._RF.pop()},{}],lightCtrl:[function(e,t){"use strict";cc._RF.push(t,"0697boHxd1AMZsBavJTQv4/","lightCtrl"),cc.Class({extends:cc.Component,properties:{animation:cc.Animation},onLoad:function(){this.animation.on(cc.Animation.EventType.FINISHED,this.onFinish,this)},onDestroy:function(){this.animation.off(cc.Animation.EventType.FINISHED,this.onFinish,this)},start:function(){},playIn:function(e,t,i){this.totalTime=e,this.fun=t,this.target=i,this.stop(),this.animation.playAdditive("lightIn")},stop:function(){this.animation.stop("lightIn"),this.animation.stop("lightContinued"),this.animation.stop("lightOut"),this.unscheduleAllCallbacks()},onFinish:function(e,t){e==cc.Animation.EventType.FINISHED&&("lightIn"==t.name?(this.animation.playAdditive("lightContinued"),this.totalTime>0&&this.scheduleOnce(function(){this.animation.playAdditive("lightOut")},this.totalTime)):"lightOut"==t.name&&(this.animation.stop("lightContinued"),this.fun&&this.fun.call(this.target,this.node)))}}),cc._RF.pop()},{}],lotteryLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"2643aYRtmRGgalpu/a+BmQv","lotteryLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,circleNode:cc.Node,blockNode:cc.Node,timeLabel:cc.Label,adNode:cc.Node,shareNode:cc.Node},onLoad:function(){Utils.adaptNode(this.fixedNode),this.onLottyTimeChanged(LocalData.lotteryTime),NC.addObserver(NC.KEY.LOTTERY_TIME_CHANGED,this.onLottyTimeChanged,this),NC.addObserver(NC.KEY.REWARD_TYPE_CHANGED,this.onRewardTypeChanged,this),this.onRewardTypeChanged({pageName:Config.PAGE_NAMES.lottery,rewardType:Config.getRewardType(Config.PAGE_NAMES.lottery)})},start:function(){AD.showBanner()},onDestroy:function(){AD.hideBanner(),NC.removeObserver(NC.KEY.LOTTERY_TIME_CHANGED,this),NC.removeObserver(NC.KEY.REWARD_TYPE_CHANGED,this)},onLottyTimeChanged:function(e){this.timeLabel.string="["+e+"/3]"},onRewardTypeChanged:function(e){e.pageName==Config.PAGE_NAMES.lottery&&("ad"==e.rewardType?this.adNode.active=!0:this.adNode.active=!1,this.shareNode.active=!this.adNode.active)},onADButtonClick:function(){audioCtrl.playEffect("musicOn"),LocalData.lotteryTime>0?(this.blockNode.active=!0,AD.showVideo(function(e){if(e)Utils.showToast(e),this.blockNode.active=!1;else{LocalData.lotteryTime--;var t=Utils.solveLottery();this.circleNode.rotation=this.circleNode.rotation%360;var i=cc.rotateTo(5,1800-60*t).easing(cc.easeBackOut()),o=cc.callFunc(this.onActionFinish,this,t);this.circleNode.stopAllActions(),this.circleNode.runAction(cc.sequence(i,o)),this.blockNode.active=!0,Config.resetRewardType(Config.PAGE_NAMES.lottery)}}.bind(this),"\u5e7f\u544a-\u5e78\u8fd0\u5927\u8f6c\u76d8")):Utils.showToast("\u60a8\u7684\u514d\u8d39\u6b21\u6570\u4e0d\u8db3\u4e86\uff0c\u8bf7\u660e\u5929\u518d\u6765\u5427")},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),LocalData.lotteryTime>0?(this.blockNode.active=!0,Share.share(function(e){if(e)Utils.showToast(e),this.blockNode.active=!1;else{LocalData.lotteryTime--;var t=Utils.solveLottery();this.circleNode.rotation=this.circleNode.rotation%360;var i=cc.rotateTo(5,1800-60*t).easing(cc.easeBackOut()),o=cc.callFunc(this.onActionFinish,this,t);this.circleNode.stopAllActions(),this.circleNode.runAction(cc.sequence(i,o)),this.blockNode.active=!0,Config.resetRewardType(Config.PAGE_NAMES.lottery)}}.bind(this),"\u5206\u4eab-\u5e78\u8fd0\u5927\u8f6c\u76d8")):Utils.showToast("\u60a8\u7684\u514d\u8d39\u6b21\u6570\u4e0d\u8db3\u4e86\uff0c\u8bf7\u660e\u5929\u518d\u6765\u5427")},onActionFinish:function(e,t){switch(audioCtrl.playEffect("light"),this.blockNode.active=!1,t){case 0:LocalData.addNewSpeedUpRate(1200,1,"lottery");break;case 1:for(var i=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl"),o=!1,n=parseInt(CSV.master[LocalData.unlockMasterMaxLv].ad_egg),s=0;s<8;s++)i.hasEnoughCell()?i.putEgg(n,-3):(o=!0,LocalData.putStorageEgg({eggType:-3,lv:n}));o&&setTimeout(function(){Utils.showToast("\u4f4d\u7f6e\u4e0d\u8db3\u65e0\u6cd5\u5f97\u5230\u5168\u90e8\u7684\u91d1\u86cb\uff0c\u5269\u4f59\u7684\u91d1\u86cb\u5728\u6709\u7a7a\u4f4d\u65f6\u4f1a\u53ca\u65f6\u53d1\u653e")},1e3);break;case 2:LocalData.addNewCoinIncreaseRate(1200,4),Utils.loadResWithCorrection("Prefab/coinRainLayer/coinRainLayer",cc.Prefab,function(e,t){if(e)cc.log(e);else{var i=cc.instantiate(t);i.zIndex=1,i.parent=cc.find("Canvas")}});break;case 3:LocalData.diamond+=20;break;case 4:LocalData.addCoin(14400*LocalData.solveRewordPerSecond());break;case 5:LocalData.addCoin(86400*LocalData.solveRewordPerSecond());break;default:cc.assert(!1,"lottery error")}Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u3010"+CSV.lottery[t+1].desc+"\u3011")},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),this.node.destroy(),LocalData.save()}}),cc._RF.pop()},{}],moreButtonCtrl:[function(e,t){"use strict";cc._RF.push(t,"80aceRox/lHzpmX1ajTEZ+R","moreButtonCtrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.originX=this.node.x,this.originY=this.node.y},start:function(){this.schedule(function(){audioCtrl.playEffect("musicOn");for(var e=[],t=0;t<10;t++){var i=cc.moveTo(.05,this.originX+20*Math.random()-10,this.originY+20*Math.random()-10);e.push(i)}var o=cc.callFunc(function(e){e.x=this.originX,e.y=this.originY},this);e.push(o),this.node.runAction(cc.sequence(e))},8)}}),cc._RF.pop()},{}],moreLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"829b2/EQOBAAaZYTtHZVQ6u","moreLayerCtrl"),cc.Class({extends:cc.Component,properties:{blackNode:cc.Node,blockNode:cc.Node,bannerNode:cc.Node,moreButtonNode:cc.Node,originMoreButtonX:0,items:[e("moreitemCtrl")]},onLoad:function(){if(!1!==Config.isShowMore){var e=cc.find("Canvas/UI"),t=e.getComponent("UICtrl");this.node.x=e.x,this.node.y=e.y,this.node.width=e.width,this.node.height=e.height,this.moreButtonNode.scale=t.uiNodes[0].scale,this.bannerNode.scale=this.moreButtonNode.scale,this.originMoreButtonX=this.moreButtonNode.x;var i=cc.view.getVisibleSize();this.blackNode.width=i.width,this.blackNode.height=i.height,this.blockNode.width=i.width,this.blockNode.height=i.height;var o=i.height-this.node.height+620,n=i.height-o-400;if(n<650){var s=this.moreButtonNode.getComponent(cc.Widget);s.top=s.top+n-650}}else this.node.active=!1},start:function(){},onMoreButtonClick:function(){var e=this;audioCtrl.playEffect("musicOn"),this.bannerNode.active=!0,this.blockNode.active=!0;var t=cc.view.getVisibleSize(),i=this.moreButtonNode.y;this.moreButtonNode.stopAllActions(),this.moreButtonNode.runAction(cc.moveTo(.2,t.width/2+200,i).easing(cc.easeBackIn())),setTimeout(function(){var e=this.bannerNode.y;this.bannerNode.stopAllActions(),this.bannerNode.runAction(cc.moveTo(.2,t.width/2-this.bannerNode.width*this.bannerNode.scale,e).easing(cc.easeBackOut())),this.blackNode.active=!0}.bind(this),200),setTimeout(function(){this.blockNode.active=!1}.bind(this),400);for(var o=0;o<Config.more.length;o++)this.items[o].init(Config.more[o]),this.items[o].node.active=!0;this.items.length-Config.more.length>0&&boatSDK.wladGetAds(this.items.length-Config.more.length).then(function(t){for(var i=Config.more.length;i<e.items.length;i++)t.data[i-Config.more.length]?(e.items[i].init(t.data[i-Config.more.length]),e.items[i].node.active=!0):e.items[i].node.active=!1}).catch(function(){cc.log("\u83b7\u53d6\u6e38\u620f\u76d2\u5b50\u51fa\u9519\u4e86")})},onBlackNodeClick:function(){audioCtrl.playEffect("musicOn"),this.blockNode.active=!0;var e=cc.view.getVisibleSize(),t=this.bannerNode.y;this.bannerNode.stopAllActions(),this.bannerNode.runAction(cc.moveTo(.2,e.width/2+10,t).easing(cc.easeBackIn())),setTimeout(function(){var e=this.moreButtonNode.y;this.moreButtonNode.stopAllActions(),this.moreButtonNode.runAction(cc.moveTo(.2,this.originMoreButtonX,e).easing(cc.easeBackOut())),this.blackNode.active=!1}.bind(this),200),setTimeout(function(){this.blockNode.active=!1,this.bannerNode.active=!1}.bind(this),400)}}),cc._RF.pop()},{moreitemCtrl:"moreitemCtrl"}],moreitemCtrl:[function(e,t){"use strict";cc._RF.push(t,"e1b18K9AiBFnoq3HY+dExQC","moreitemCtrl"),cc.Class({extends:cc.Component,properties:{appIcon:cc.Sprite,appNameLabel:cc.Label,inited:!1,info:null},start:function(){},init:function(e){this.inited=!0,this.info=e,Utils.loadHeadIcon(this.appIcon,e.logo,this.appIcon.node.width),this.appNameLabel.string=e.name},onIconClick:function(){var e=this;audioCtrl.playEffect("musicOn"),cc.sys.platform==cc.sys.WECHAT_GAME?0==this.inited?Utils.showToast("\u6570\u636e\u8fd8\u6ca1\u6709\u51c6\u5907\u597d"):this.info.canOpenAppID?wx.navigateToMiniProgram({appId:this.info.appid,path:this.info.path,success:function(){boatSDK.ald.sendEvent("\u76f4\u8df3\u5c0f\u7a0b\u5e8f\u6210\u529f",{appid:e.info.appid,name:e.info.name})},fail:function(){boatSDK.ald.sendEvent("\u76f4\u8df3\u5c0f\u7a0b\u5e8f\u5931\u8d25",{appid:e.info.appid,name:e.info.name})}}):wx.previewImage({urls:[this.info.img]}):Utils.showToast("\u975e\u5fae\u4fe1\u73af\u5883")}}),cc._RF.pop()},{}],offlineRewardLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"e15ddSwwRBG+rV9eANmOrpr","offlineRewardLayerCtrl"),cc.Class({extends:cc.Component,properties:{coin:0,fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,coinLabel:cc.Label,isADComplete:!1,videoNode:cc.Node,shareNode:cc.Node},onLoad:function(){Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode),"ad"==Config.getRewardType(Config.PAGE_NAMES.offline)?this.videoNode.active=!0:this.videoNode.active=!1,this.shareNode.active=!this.videoNode.active},start:function(){AD.showBanner()},onDestroy:function(){AD.hideBanner(),this.isADComplete?(LocalData.addCoin(2*this.coin),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u4e86[\u53cc\u500d\u79bb\u7ebf\u6536\u76ca \u91d1\u5e01+"+Utils.formatNumber(2*this.coin)+"]")):(LocalData.addCoin(this.coin),Utils.showToast("\u606d\u559c\u4f60\u83b7\u5f97\u4e86[\u79bb\u7ebf\u6536\u76ca \u91d1\u5e01+"+Utils.formatNumber(this.coin)+"]")),LocalData.save(),NC.postNotice(NC.KEY.OFFLINE_REWARD_LAYER_CLOSE)},init:function(e){this.coin=e,this.coinLabel.string=Utils.formatNumber(e)},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},onADButtonClick:function(){audioCtrl.playEffect("musicOn"),AD.showVideo(function(e){e?Utils.showToast(e):(this.isADComplete=!0,Utils.outAction(this.node,this.bgNode,this.blockNode),Config.resetRewardType(Config.PAGE_NAMES.offline))}.bind(this),"\u5e7f\u544a-\u53cc\u500d\u79bb\u7ebf\u6536\u76ca")},onShareButtonClick:function(){audioCtrl.playEffect("musicOn"),Share.share(function(e){e?Utils.showToast(e):(this.isADComplete=!0,Utils.outAction(this.node,this.bgNode,this.blockNode),Config.resetRewardType(Config.PAGE_NAMES.offline))}.bind(this),"\u5206\u4eab-\u53cc\u500d\u79bb\u7ebf\u6536\u76ca")}}),cc._RF.pop()},{}],personCtrl:[function(e,t){"use strict";cc._RF.push(t,"cbcfe2ff01P8IhcbJQ5kSIn","personCtrl"),cc.Class({extends:cc.Component,properties:{npcNode:cc.Node,butterFlyNode:cc.Node,bubbleAnimation:cc.Animation,normalLabel:cc.Label,_fun:null,_target:null,_isCanTouch:!1},start:function(){},hide:function(){this.node.active=!1},showMessage:function(e,t,i,o){this._isCanTouch=!1,this.node.active=!0,this.butterFlyNode.active=o||!1,this._fun=t,this._target=i,this.normalLabel.string=e,this.bubbleAnimation.node.active=!1;var n=cc.view.getVisibleSize();this.npcNode.stopAllActions(),this.npcNode.x=-n.width/2-200,this.npcNode.y=-n.height/2+100;var s=cc.moveBy(.5,400,0).easing(cc.easeBackOut()),a=cc.callFunc(function(){this.bubbleAnimation.node.active=!0,this.bubbleAnimation.play("bubble")},this),r=cc.delayTime(.5),c=cc.callFunc(function(){this._isCanTouch=!0},this);this.npcNode.runAction(cc.sequence(s,a,r,c))},onSelfClick:function(){if(cc.log("onSelfClick"),this._isCanTouch){this._isCanTouch=!1,audioCtrl.playEffect("musicOn");var e=cc.view.getVisibleSize(),t=cc.moveTo(.5,-e.width/2-200,this.npcNode.y).easing(cc.easeBackIn()),i=cc.callFunc(function(){this.node.active=!1,this._fun&&this._fun.call(this._target)},this);this.npcNode.runAction(cc.sequence(t,i))}}}),cc._RF.pop()},{}],plunderItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"adc93fZOxtGirkQLwWjoYp4","plunderItemCtrl"),cc.Class({extends:cc.Component,properties:{masterRunAtlas:cc.SpriteAtlas,iconSprite:cc.Sprite,foldUpSprite:cc.Sprite,purseNode:cc.Node,traiilingNode:cc.Node,row:0,col:0,lv:0,baseReward:0,speed:1,speedActions:null},start:function(){},reuse:function(e,t,i,o,n,s,a,r){this.speedAction=null,this.speed=r,this.row=i,this.col=o,this.lv=n;var c=CSV.master[parseInt(n)];this.baseReward=parseFloat(c.reward),this.iconSprite.spriteFrame=this.masterRunAtlas.getSpriteFrame("MR-LV"+n),this.foldUpSprite.spriteFrame=this.masterRunAtlas.getSpriteFrame("MR-LV"+n),Utils.setNodeJellyForeverForPlunder(this.iconSprite.node,this.foldUpSprite.node),this.traiilingNode.color=Utils.parseColor(c.traiiling_color),this.traiilingNode.opacity=137,10==this.lv||16==this.lv||20==this.lv?this.traiilingNode.y=60.8:this.traiilingNode.y=28.8;var l=cc.view.getVisibleSize();this.node.x=l.width,this.node.y=l.height;var h=cc.delayTime(a||0),d={fahterNode:s,castleWorldPos:e,treasureWorldPos:t},u=cc.callFunc(this.circleMove,this,d);this.node.runAction(cc.sequence(h,u))},circleMove:function(e,t){var i=t.fahterNode,o=t.castleWorldPos,n=t.treasureWorldPos,s=CSV.master[parseInt(this.lv)],a=cc.view.getVisibleSize(),r=100/parseFloat(s.speed),c=2*(a.width+this.node.width)/r,l=i.convertToNodeSpaceAR(o),h=l.y+5,d=cc.callFunc(function(e,t){e.scaleX=-1,e.x=(a.width+e.width)/2,e.y=h,t.purseNode.acitve=!1},this,this),u=cc.v2(l.x,h),f=((a.width+this.node.width)/2-l.x)/c,p=cc.moveTo(f,u),C=cc.callFunc(function(e,t){var i=t.baseReward,o=LocalData.solveCoinReward(i);LocalData.subCastleRmainCoin(o),t.purseNode.active=!0,NC.postNotice(NC.KEY.PLUNDER_SHOW_PARTICLE)},this,this),m=cc.v2(-(a.width+this.node.width)/2,h),g=(l.x-m.x)/c,v=cc.moveTo(g,m),N=i.convertToNodeSpaceAR(n),y=N.y+10,_=cc.callFunc(function(e,t){e.scaleX=1,e.x=-(a.width+e.width)/2,e.y=y,t.purseNode.active=!0},this,this),b=cc.v2(N.x,y),L=(b.x- -(a.width+this.node.width)/2)/c,w=cc.moveTo(L,b),A=cc.callFunc(function(e,t){var i=t.baseReward,o=LocalData.solveCoinReward(i);LocalData.addCoin(o),t.purseNode.active=!1,NC.postNotice(NC.KEY.PLUNDER_SHOW_COIN_LABEL,o)},this,this),S=cc.v2((a.width+this.node.width)/2,y),E=(S.x-N.x)/c,T=cc.moveTo(E,S),I=cc.callFunc(this.circleMove,this,t),D=cc.sequence(d,p,C,v,_,w,A,T,I),R=cc.speed(D,this.speed);this.node.runAction(R),this.speedAction=R},setSpeed:function(e){this.speed=e,this.speedAction&&this.speedAction.setSpeed(e)},unuse:function(){this.node.stopAllActions(),Utils.stopNodeJellyForever(this.iconSprite.node),Utils.stopNodeJellyForever(this.foldUpSprite.node),this.speedAction=null,this.purseNode.active=!1,this.row=-1,this.col=-1,this.lv=-1,this.baseReward=-1}}),cc._RF.pop()},{}],plundersCtrl:[function(e,t){"use strict";cc._RF.push(t,"d7ef8oyjsdJXYdS9xz8IuHo","plundersCtrl"),cc.Class({extends:cc.Component,properties:{castleNode:cc.Node,treasureNode:cc.Node,plunderItemPrefab:cc.Prefab,speed:1,coinPlunderParticle:cc.ParticleSystem,coinPlunderLabelPrefab:cc.Prefab},onLoad:function(){this.plunderNodes={},this.plunderPool=new cc.NodePool("plunderItemCtrl"),this.coinLabelPool=new cc.NodePool,NC.addObserver(NC.KEY.PLUNDER_SHOW_COIN_LABEL,this.onShowPlunderCoin,this),NC.addObserver(NC.KEY.PLUNDER_SHOW_PARTICLE,this.onShowPlunderParticle,this)},start:function(){cc.find("topFront",this.node).zIndex=1},onDestroy:function(){this.plunderPool.clear(),this.coinLabelPool.clear(),NC.removeObserver(NC.KEY.PLUNDER_SHOW_COIN_LABEL,this),NC.removeObserver(NC.KEY.PLUNDER_SHOW_PARTICLE,this)},onShowPlunderCoin:function(e){var t=this._createCoinLabel(e);t.parent=this.treasureNode,t.position=cc.v2(0,120);var i=cc.moveTo(.5,0,223),o=cc.delayTime(1),n=cc.callFunc(function(e){this.coinLabelPool.put(e)},this);t.runAction(cc.sequence(i,o,n))},onShowPlunderParticle:function(){Utils.setNodeJelly(this.castleNode,.6),this.coinPlunderParticle.resetSystem(),audioCtrl.playEffect("coin")},init:function(e,t){this.speed=t||1;for(var i=0;i<e.length;i++){var o=e[i],n=this._createPlunderItem(o.row,o.col,o.lv,1*i,this.speed);n.parent=this.node,this.plunderNodes[o.row+"_"+o.col]=n}},setSpeed:function(e){if(this.speed!=e)for(var t in this.speed=e,this.plunderNodes)this.plunderNodes.hasOwnProperty(t)&&this.plunderNodes[t].getComponent("plunderItemCtrl").setSpeed(e)},removePlunderNode:function(e,t){var i=e+"_"+t;this.plunderNodes[i]?(this.plunderPool.put(this.plunderNodes[i]),delete this.plunderNodes[i]):cc.log("\u4ece\u63a0\u593a\u961f\u5217\u91cc\u627e\u4e0d\u5230\u5e0c\u671b\u5220\u9664\u7684\u5c0f\u602a\u7269")},addPlunderNode:function(e,t,i){cc.assert(null==this.plunderNodes[e+"_"+t],"\u63a0\u593a\u961f\u5217\u91cc\u5f53\u524d\u4f4d\u7f6e\u5df2\u7ecf\u6709\u602a\u7269\u4e86");var o=this._createPlunderItem(e,t,i,0,this.speed);o.parent=this.node,this.plunderNodes[e+"_"+t]=o},_createPlunderItem:function(e,t,i,o,n){var s=this.castleNode.convertToWorldSpaceAR(cc.v2(0,0)),a=this.treasureNode.convertToWorldSpaceAR(cc.v2(0,0)),r=this.plunderPool.get(s,a,e,t,i,this.node,o,n);return null==r&&(r=cc.instantiate(this.plunderItemPrefab)).getComponent("plunderItemCtrl").reuse(s,a,e,t,i,this.node,o,n),r},_createCoinLabel:function(e){var t=this.coinLabelPool.get()||cc.instantiate(this.coinPlunderLabelPrefab);return t.getComponent(cc.Label).string="+"+Utils.formatNumber(e),t},updatePlunderItem:function(e,t,i,o){var n=e+"_"+t;cc.assert(null!=this.plunderNodes[n],"\u63a0\u593a\u961f\u5217\u91cc\u4f60\u6539\u53d8\u7684\u5c0f\u602a\u5c45\u7136\u4e0d\u5b58\u5728");var s=this.plunderNodes[n],a=s.getComponent("plunderItemCtrl");a.row=i,a.col=o,delete this.plunderNodes[n];var r=i+"_"+o;this.plunderNodes[r]=s},exchangeItem:function(e,t,i,o){var n=this.plunderNodes[e+"_"+t],s=this.plunderNodes[i+"_"+o];this.plunderNodes[e+"_"+t]=s,this.plunderNodes[i+"_"+o]=n}}),cc._RF.pop()},{}],pyqLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"1753eQuO9pGN45/UhRL3afU","pyqLayerCtrl");var i=cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,timeLineSprite:cc.Sprite,qrSprite:cc.Sprite,timeLineFrame:cc.SpriteFrame,inited:!1},statics:{base64:null},onLoad:function(){Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){if(cc.sys.platform==cc.sys.WECHAT_GAME)if(null!=i.base64)this.loadQrCodeFrame();else{if(null==LocalData.wxUserInfo.id||""==LocalData.wxUserInfo.id)return void Utils.showToast("\u83b7\u53d6\u4e8c\u7ef4\u7801\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc");var e={gameName:"merge_monster",scene:LocalData.wxUserInfo.id,width:267,is_hyaline:!0};Utils.POST(Config.service.qrcode,e,function(e,t){if(!1!==cc.isValid(this.node))if(e)Utils.showToast("\u83b7\u53d6\u4e8c\u7ef4\u7801\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc");else{var o=JSON.parse(t);o.error?Utils.showToast(o.error):(i.base64=o.qrcode,this.loadQrCodeFrame())}}.bind(this))}},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},loadQrCodeFrame:function(){var e=wx.createImage();e.src=i.base64,cc.log("base 64: ",i.base64),e.onload=function(){if(0!=cc.isValid(this.node)){var t=new cc.Texture2D;t.initWithElement(e),t.handleLoadedTexture();var i=new cc.SpriteFrame(t);this.qrSprite.spriteFrame=i,this.timeLineSprite.spriteFrame=this.timeLineFrame,this.inited=!0}else cc.log("loadQrCode onLoad no effect")}.bind(this),e.onerror=function(e){cc.log("onerror",e)}},onButtonCLick:function(){if(audioCtrl.playEffect("musicOn"),0==this.inited)Utils.showToast("\u7b49\u5f85\u4e13\u5c5e\u4e8c\u7ef4\u7801\u751f\u6210\u4e2d...");else{var e=this.timeLineSprite.node,t=e.convertToWorldSpace(cc.p(0,0)),i=e.convertToWorldSpace(cc.p(e.width,e.height));i.width=i.x-t.x,i.height=i.y-t.y;var o=cc.view.getVisibleSize().width/cc.game.canvas.width;t.x=t.x/o,t.y=t.y/o,i.width=i.width/o,i.height=i.height/o,t.y=cc.game.canvas.height-(t.y+i.height);var n=cc.game.canvas.toTempFilePathSync({x:t.x,y:t.y,width:i.width,height:i.height,destWidth:i.width,destHeight:i.height});this.saveFileTowritePhotosAlbum(n)}},saveFileTowritePhotosAlbum:function(e){wx.authorize({scope:"scope.writePhotosAlbum",success:function(){wx.saveImageToPhotosAlbum({filePath:e,success:function(){Utils.showToast("\u4fdd\u5b58\u56fe\u7247\u6210\u529f\u4e86")},fail:function(){Utils.showToast("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\u4e86")}})},fail:function(){Utils.showToast("\u5fc5\u987b\u5148\u6388\u6743\u624d\u80fd\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c")}})}});cc._RF.pop()},{}],rankItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"1b3930qQuZK7osPSHrfxrA6","rankItemCtrl"),cc.Class({extends:cc.Component,properties:{rankAtlas:cc.SpriteAtlas,rankSprite:cc.Sprite,rankLabel:cc.Label,headIconSprite:cc.Sprite,nicknameLabel:cc.Label,cumulativeCoinLabel:cc.Label,lineNode:cc.Node},start:function(){},reuse:function(e,t,i){this.data=t,e<3?(this.rankSprite.node.active=!0,this.rankSprite.spriteFrame=this.rankAtlas.getSpriteFrame("rankLayer_UICF_"+(e+2)),this.rankLabel.node.active=!1):(this.rankLabel.node.active=!0,this.rankLabel.string=e+1,this.rankSprite.node.active=!1);var o=this.data.avatar;Utils.loadHeadIconAndVerification(this.headIconSprite,o,this.rankSprite.node.width,function(){return this.data.avatar==o}.bind(this)),this.nicknameLabel.string=t.nickname,this.cumulativeCoinLabel.string=Utils.formatNumber(t.coin),this.lineNode.active=!i},unuse:function(){}}),cc._RF.pop()},{}],rankLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"1b906I0rxBHzbuUsX+IcJA5","rankLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,worldLayer:cc.Node,friendLayer:cc.Node},onLoad:function(){if(Utils.adaptNode(this.fixedNode),Utils.inAction(this.node,this.bgNode,this.blockNode),cc.sys.platform==cc.sys.WECHAT_GAME){var e=wx.getOpenDataContext();e.postMessage({action:"selfOpenid",openid:LocalData.wxUserInfo.openid}),e.postMessage({action:"showPage",name:"rankLayer"})}},start:function(){},onToggleClick:function(e,t){audioCtrl.playEffect("musicOn"),this.worldLayer.active="0"==t,this.friendLayer.active=!this.worldLayer.active},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},onDestroy:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getOpenDataContext().postMessage({action:"showPage",name:"empty"}),LocalData.save()}}),cc._RF.pop()},{}],rankWorldLayer:[function(e,t){"use strict";cc._RF.push(t,"45256F7xY9D1KBf/IpwDT7g","rankWorldLayer"),cc.Class({extends:e("TableViewCtrlV"),properties:{waitLabel:cc.Label,selfRankLabel:cc.Label},onLoad:function(){var e={unionid:LocalData.wxUserInfo.unionid};Utils.POST(Config.service.info,e,function(e,t){if(cc.isValid(this.node))if(e)this.waitLabel.string="\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u7ed9\u529b\n\u8bf7\u7a0d\u540e\u518d\u8bd5";else{var i=JSON.parse(t);if(cc.log(i),i.error)return this.waitLabel.string="\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u7ed9\u529b\n\u8bf7\u7a0d\u540e\u518d\u8bd5",void cc.log(i);this._sourceData=i.rankList,this.scrollView.node.active=!0,this.waitLabel.node.active=!1,i.curRank?this.selfRankLabel.string=i.curRank:this.selfRankLabel.string="\u5f53\u524d\u672a\u6709\u6392\u540d",this.reload()}}.bind(this))},start:function(){},onDestroy:function(){this.clearReuserArray()},getItem:function(e){var t=this._reuseArray.pop();return null==t&&(t=cc.instantiate(this.itemPrefab)),t.getComponent(this.itemCtrlName).reuse(e,this._sourceData[e],e==this._sourceData.length-1),t}}),cc._RF.pop()},{TableViewCtrlV:"TableViewCtrlV"}],shopLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"04340+tysVG2r7SYydTRUZQ","shopLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,masterLayer:cc.Node,techLayer:cc.Node,coinNode:cc.Node,coinLabel:cc.Label,diamondLabel:cc.Label},_byteMoreGameBanner:null,onLoad:function(){var e=cc.view.getVisibleSize();this.coinNode.x=-487,this.coinNode.y=e.height/2-144;var t=cc.view.getVisibleSize().height;t-=400,this.fixedNode.height>t&&(this.fixedNode.scale=t/this.fixedNode.height),Utils.inAction(this.node,this.bgNode,this.blockNode),cc.sys.platform==cc.sys.BYTE_GAME?JsNativeBridge.showByteMoreGameBanner():AD.showBanner()},start:function(){NC.addObserver(NC.KEY.COIN_CHANGED,this.onCoinChanged,this),NC.addObserver(NC.KEY.DIAMOND_CHANGED,this.onDiamondChanged,this),this.onCoinChanged(LocalData.coin),this.onDiamondChanged(LocalData.diamond)},onDestroy:function(){NC.removeObserver(NC.KEY.COIN_CHANGED,this),NC.removeObserver(NC.KEY.DIAMOND_CHANGED,this),cc.sys.platform==cc.sys.BYTE_GAME?JsNativeBridge.hideByteMoreGameBanner():AD.hideBanner()},onCoinChanged:function(e){this.coinLabel.string=Utils.formatNumber(e)},onDiamondChanged:function(e){this.diamondLabel.string=e},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode),LocalData.save()},onToggleClick:function(e,t){audioCtrl.playEffect("musicOn"),0==(t=parseInt(t))?(this.masterLayer.active=!0,this.techLayer.active=!1):(this.masterLayer.active=!1,this.techLayer.active=!0)}}),cc._RF.pop()},{}],shopMasterItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"cf5276YentDrbapVhdnHYdh","shopMasterItemCtrl"),cc.Class({extends:cc.Component,properties:{lv:0,masterIconSprite:cc.Sprite,masterNameLabel:cc.Label,offIconNode:cc.Node,offLabel:cc.Label,speedBar:cc.ProgressBar,rewardBar:cc.ProgressBar,buyButtonNode:cc.Node,buyButtonSprite:cc.Sprite,buyButton:cc.Button,diamondIconNode:cc.Node,coinIconNode:cc.Node,costLabel:cc.Label,masterAtlas:cc.SpriteAtlas,buttonAtlas:cc.SpriteAtlas,costType:"",costNumber:0,freeUpgradeLayerPrefab:cc.Prefab},start:function(){},onDestroy:function(){this.unuse()},reuse:function(e){this.lv=e,this.refresh(),NC.addObserver(NC.KEY.COIN_CHANGED,this.refresh,this),NC.addObserver(NC.KEY.DIAMOND_CHANGED,this.refresh,this),NC.addObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this.refresh,this),NC.addObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this.refresh,this),NC.addObserver(NC.KEY.MASTER_BUY_TIMES_CHANGED,this.refresh,this)},unuse:function(){NC.removeObserver(NC.KEY.COIN_CHANGED,this),NC.removeObserver(NC.KEY.DIAMOND_CHANGED,this),NC.removeObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this),NC.removeObserver(NC.KEY.UNLOCK_MASTER_MAX_LV_CHANGED,this),NC.removeObserver(NC.KEY.MASTER_BUY_TIMES_CHANGED,this)},refresh:function(){var e=CSV.master[LocalData.unlockMasterMaxLv],t=parseInt(e.unlock_gold_lv),i=parseInt(e.unlock_diamond_lv),o=CSV.master[this.lv];this.lv<=t||this.lv<=i||this.lv<=LocalData.unlockMasterMaxLv?(this.masterNameLabel.string="LV"+this.lv+"\n"+o.name,this.masterIconSprite.spriteFrame=this.masterAtlas.getSpriteFrame("MR-LV"+this.lv),this.masterIconSprite.node.color=cc.color(255,255,255,255),this.masterIconSprite.node.opacity=255,this.speedBar.progress=parseFloat(o.speed)/Config.masterMaxSpeed,this.rewardBar.progress=Utils.solveMasterRewardProgress(parseFloat(o.reward)),this.buyButtonSprite.spriteFrame=this.buttonAtlas.getSpriteFrame("shop_UI_4"),this.costLabel.node.active=!0,this.lv<=t?(this.coinIconNode.active=!0,this.diamondIconNode.active=!1,this.costType="coin",this.costNumber=LocalData.solveMasterConstCoin(this.lv),this.costLabel.string=Utils.formatNumber(this.costNumber),Utils.setCascadeColorAndOpacity(this.buyButtonNode,cc.color(255,255,255,255),255)):this.lv<=i?(this.coinIconNode.active=!1,this.diamondIconNode.active=!0,this.costType="diamond",this.costNumber=parseFloat(o.cost_dimond),this.costLabel.string=Utils.formatNumber(this.costNumber),this.costNumber>LocalData.diamond?Utils.setCascadeColorAndOpacity(this.buyButtonNode,cc.color(200,200,200,255),155):Utils.setCascadeColorAndOpacity(this.buyButtonNode,cc.color(255,255,255,255),255)):(this.buyButtonSprite.spriteFrame=this.buttonAtlas.getSpriteFrame("shop_UI_6"),this.diamondIconNode.active=!1,this.coinIconNode.active=!1,this.costLabel.node.active=!1,this.costType="lock")):(this.masterNameLabel.string="LV"+this.lv+"\n??????",this.masterIconSprite.spriteFrame=this.masterAtlas.getSpriteFrame("MR-LV"+this.lv),this.masterIconSprite.node.color=cc.color(0,0,0,255),this.masterIconSprite.node.opacity=200,this.speedBar.progress=0,this.rewardBar.progress=0,this.diamondIconNode.active=!1,this.coinIconNode.active=!1,this.costLabel.node.active=!1,this.buyButtonSprite.spriteFrame=this.buttonAtlas.getSpriteFrame("shop_UI_6"),Utils.setCascadeColorAndOpacity(this.buyButtonNode,cc.color(255,255,255,255),255),this.costType="lock");var n=LocalData.solveOffTechology();this.offLabel.string=(100*n).toFixed(0)+"%\noff",this.offIconNode.active=0!=n},onBuyButtonClick:function(){if(audioCtrl.playEffect("musicOn"),"lock"==this.costType)Utils.showToast("\u8fd9\u4e2a\u602a\u7269\u8fd8\u6ca1\u6709\u89e3\u9501");else if("diamond"==this.costType)if(LocalData.diamond<this.costNumber)Utils.showToast("\u4f60\u7684\u94bb\u77f3\u4e0d\u591f");else{var e=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");if(e.hasEnoughCell()){var t=this.costNumber;e.putEgg(this.lv,-2),LocalData.diamond-=t,Utils.showToast("\u8d2d\u4e70\u6210\u529f")}else Utils.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u4f4d\u7f6e\u4e86")}else if("coin"==this.costType)if(LocalData.coin<this.costNumber)Utils.showNotEnoughCoin();else{var i=cc.find("Canvas/CheckBoard").getComponent("CheckBoardCtrl");if(i.hasEnoughCell()){var o=parseInt(CSV.master[LocalData.unlockMasterMaxLv].ad_up_level);if(Math.random()<=.1&&this.lv<o){var n=parseInt(CSV.master[LocalData.unlockMasterMaxLv].ad_up_level),s=cc.instantiate(this.freeUpgradeLayerPrefab);s.getComponent("freeUpgradeLayerCtrl").init(this.lv,n,this.costNumber),s.parent=cc.find("Canvas")}else{var a=this.costNumber;i.putEgg(this.lv,-2),LocalData.subCoin(a),LocalData.addMasterBuyTimes(this.lv,1),Utils.showToast("\u8d2d\u4e70\u6210\u529f")}}else Utils.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u4f4d\u7f6e\u4e86")}else cc.assert(!1,"what costType you are")}}),cc._RF.pop()},{}],shopMasterLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"e8b91eKMBBFqLrUBTahS5hb","shopMasterLayerCtrl"),cc.Class({extends:e("TableViewCtrlV"),properties:{},start:function(){this.reload()},onDestroy:function(){this.clearReuserArray()},getItem:function(e){var t=this._reuseArray.pop();return null==t&&(t=cc.instantiate(this.itemPrefab)),t.getComponent(this.itemCtrlName).reuse(e+1),t},onScrollViewEvent:function(e){LocalData.shopMasterLayerY=e.content.y},reload:function(){for(var e=0;e<this._usedArray.length;e++)this._usedArray[e].parent=null,this._usedArray[e].getComponent(this.itemCtrlName).unuse(),this._reuseArray.push(this._usedArray[e]);this._usedArray=[],this.itemTotal=Config.masterMaxLv,this.scrollView.node.getContentSize().width;var t=Math.max(this.scrollView.node.getContentSize().height,this.itemHeight*this.itemTotal);this.content.height=t,null==LocalData.shopMasterLayerY?this.scrollView.scrollToTop():this.content.y=LocalData.shopMasterLayerY}}),cc._RF.pop()},{TableViewCtrlV:"TableViewCtrlV"}],shopTechItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"cccd1Xq0QpPSqmMBVqDH+lV","shopTechItemCtrl"),cc.Class({extends:cc.Component,properties:{id:1,nameLabel:cc.Label,itemIconSprite:cc.Sprite,desLabel:cc.Label,costLabel:cc.Label,buyButtonNode:cc.Node,lockButtonNode:cc.Node,ownerButtonNode:cc.Node,techAtlas:cc.SpriteAtlas,costNumber:0},start:function(){},onDestroy:function(){this.unuse()},reuse:function(e){this.id=e,this.refresh(),NC.addObserver(NC.KEY.COIN_TECHNOLOGY_CHAGED,this.refresh,this),NC.addObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this.refresh,this),NC.addObserver(NC.KEY.COIN_CHANGED,this.refresh,this)},refresh:function(){var e=0,t="";this.id>10?(e=this.id-10,t="off"):(e=this.id,t="coin"),"coin"==t?(this.nameLabel.string="\u5f3a\u5316[LV"+e+"]",this.itemIconSprite.spriteFrame=this.techAtlas.getSpriteFrame("shop_coin_"+e),this.desLabel.string="\u5168\u90e8\u602a\u7269\u6536\u76ca\u589e\u52a0"+CSV.technology[this.id].reward+"%",this.costNumber=parseFloat(CSV.technology[this.id].piece),this.costLabel.string=Utils.formatNumber(this.costNumber),LocalData.coinTechnologylv>=e?(this.ownerButtonNode.active=!0,this.buyButtonNode.active=!1,this.lockButtonNode.active=!1):e-LocalData.coinTechnologylv==1?(this.ownerButtonNode.active=!1,this.buyButtonNode.active=!0,this.lockButtonNode.active=!1):(this.ownerButtonNode.active=!1,this.buyButtonNode.active=!1,this.lockButtonNode.active=!0)):(this.nameLabel.string="\u6253\u6298[LV"+e+"]",this.itemIconSprite.spriteFrame=this.techAtlas.getSpriteFrame("shop_off_"+e),this.desLabel.string="\u5168\u90e8\u602a\u7269\u964d\u4ef7"+CSV.technology[this.id].reward+"%",this.costNumber=parseFloat(CSV.technology[this.id].piece),this.costLabel.string=Utils.formatNumber(this.costNumber),LocalData.offTechnologyLv>=e?(this.ownerButtonNode.active=!0,this.buyButtonNode.active=!1,this.lockButtonNode.active=!1):e-LocalData.offTechnologyLv==1?(this.ownerButtonNode.active=!1,this.buyButtonNode.active=!0,this.lockButtonNode.active=!1):(this.ownerButtonNode.active=!1,this.buyButtonNode.active=!1,this.lockButtonNode.active=!0))},unuse:function(){NC.removeObserver(NC.KEY.COIN_TECHNOLOGY_CHAGED,this),NC.removeObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this),NC.removeObserver(NC.KEY.COIN_CHANGED,this)},onBuyButtonClick:function(){audioCtrl.playEffect("musicOn");var e=this.costNumber;if(LocalData.coin<e)Utils.showNotEnoughCoin();else{var t="",i=0;this.id>10?(i=this.id-10,t="off"):(i=this.id,t="coin"),"coin"==t?(LocalData.subCoin(e),LocalData.coinTechnologylv=i):"off"==t&&(LocalData.subCoin(e),LocalData.offTechnologyLv=i)}}}),cc._RF.pop()},{}],shopTechLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"e503ef78CtK2qCUB64kgO8K","shopTechLayerCtrl"),cc.Class({extends:e("TableViewCtrlV"),properties:{},onLoad:function(){},start:function(){NC.addObserver(NC.KEY.COIN_TECHNOLOGY_CHAGED,this.refresh,this),NC.addObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this.refresh,this),this.refresh()},onDestroy:function(){NC.removeObserver(NC.KEY.COIN_TECHNOLOGY_CHAGED,this),NC.removeObserver(NC.KEY.OFF_TECHNOLOGY_CHANGED,this),this.clearReuserArray()},refresh:function(){this.sortId(),this.reload()},sortId:function(){var e=LocalData.coinTechnologylv+1,t=LocalData.offTechnologyLv+1+10;this._sourceData=[],e<11&&this._sourceData.push(e),t<21&&this._sourceData.push(t);for(var i=1;i<=10;i++)i!==e&&this._sourceData.push(i);for(var o=11;o<=20;o++)o!==t&&this._sourceData.push(o)},onScrollViewEvent:function(e){LocalData.shopTechLayerY=e.content.y},getItem:function(e){var t=this._reuseArray.pop();return null==t&&(t=cc.instantiate(this.itemPrefab)),t.getComponent(this.itemCtrlName).reuse(this._sourceData[e]),t},reload:function(){for(var e=0;e<this._usedArray.length;e++)this._usedArray[e].parent=null,this._usedArray[e].getComponent(this.itemCtrlName).unuse(),this._reuseArray.push(this._usedArray[e]);this._usedArray=[],this.itemTotal=this._sourceData.length,this.scrollView.node.getContentSize().width;var t=Math.max(this.scrollView.node.getContentSize().height,this.itemHeight*this.itemTotal);this.content.height=t,null==LocalData.shopTechLayerY?this.scrollView.scrollToTop():this.content.y=LocalData.shopTechLayerY}}),cc._RF.pop()},{TableViewCtrlV:"TableViewCtrlV"}],signinGetLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"d0353FVX5VDlJgBmcIiKiH6","signinGetLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,diamondLabel:cc.Label,titleLabel:cc.Label,iconSprite:cc.Sprite,signinAtlas:cc.SpriteAtlas},onLoad:function(){Utils.inAction(this.node,this.bgNode,this.blockNode)},start:function(){},init:function(e,t,i){this.diamond=e,this.isDouble=t,this.diamondLabel.string="x"+e,this.titleLabel.string=t?"\u6bcf\u65e5\u767b\u5f55\u5956\u52b1x2":"\u6bcf\u65e5\u767b\u5f55\u5956\u52b1",this.iconSprite.spriteFrame=this.signinAtlas.getSpriteFrame("signinLayer_item"+i)},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},onDestroy:function(){LocalData.diamond+=this.diamond;var e=this.isDouble?"\u606d\u559c\u83b7\u5f97\u3010\u6bcf\u65e5\u767b\u5f55\u5956\u52b1x2\u3011":"\u606d\u559c\u83b7\u5f97\u3010\u6bcf\u65e5\u767b\u5f55\u5956\u52b1\u3011";Utils.showToast(e)}}),cc._RF.pop()},{}],signinItemCtrl:[function(e,t){"use strict";cc._RF.push(t,"969312JLnxBVIpnFwzpaUzD","signinItemCtrl"),cc.Class({extends:cc.Component,properties:{alreadyNode:cc.Node,bgSprite:cc.Sprite,normalFrame:cc.SpriteFrame,getFrame:cc.SpriteFrame},start:function(){},init:function(e){if("alreadyGet"==e)this.alreadyNode.active=!0,this.bgSprite.spriteFrame=this.normalFrame,this.node.stopAllActions(),this.node.scale=1;else if("canGet"==e){this.alreadyNode.active=!1,this.bgSprite.spriteFrame=this.getFrame;var t=cc.scaleTo(.5,1.1),i=cc.scaleTo(.5,.9),o=cc.sequence(t,i),n=cc.repeatForever(o);this.node.stopAllActions(),this.node.runAction(n)}else"cantGet"==e?(this.alreadyNode.active=!1,this.bgSprite.spriteFrame=this.normalFrame,this.node.stopAllActions(),this.node.scale=1):cc.assert(!1,"\u6bcf\u65e5\u7b7e\u5230\u7684\u72b6\u6001\u662f\u5565?")}}),cc._RF.pop()},{}],signinLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"1db77OH3Y5FzqPQD+PzkiaD","signinLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,bgNode:cc.Node,blockNode:cc.Node,doubleAdNode:cc.Node,doubleAdLabel:cc.Label,doubleShareNode:cc.Node,doubleShareLabel:cc.Label,singleNode:cc.Node,itemCtrls:[e("signinItemCtrl")],getLayerPrefab:cc.Prefab},onLoad:function(){this.diamondByDay=[0,50,100,150,200,300,400,500];var e=cc.view.getVisibleSize().height;e-=400,this.fixedNode.height>e&&(this.fixedNode.scale=e/this.fixedNode.height),Utils.inAction(this.node,this.bgNode,this.blockNode),cc.sys.platform==cc.sys.BYTE_GAME?JsNativeBridge.showByteMoreGameBanner():AD.showBanner()},start:function(){NC.addObserver(NC.KEY.SIGNIN_DATA_CHANGED,this.onSigninChanged,this),this.onSigninChanged(),"ad"==Config.getRewardType(Config.PAGE_NAMES.signin)?this.doubleAdNode.active=!0:this.doubleAdNode.active=!1,this.doubleShareNode.active=!this.doubleAdNode.active},onDestroy:function(){NC.removeObserver(NC.KEY.SIGNIN_DATA_CHANGED,this),cc.sys.platform==cc.sys.BYTE_GAME?JsNativeBridge.hideByteMoreGameBanner():AD.hideBanner()},onSigninChanged:function(){var e=LocalData.signinCanGetDay,t=LocalData.signinGetTime,i=Utils.offsetDay(t,Utils.getCurTime());if(i>1)this.refresh(0,1),this._refreshButton("\u9886\u53d6\u53cc\u500d",!0,!0);else if(0==i){var o=e-1;this.refresh(o,0),this._refreshButton("\u5df2\u7ecf\u9886\u53d6",!1,!1)}else 1==i?(8==e&&(e=1,LocalData.signinCanGetDay=1),this.refresh(e-1,e),this._refreshButton("\u9886\u53d6\u53cc\u500d",!0,!0)):i<0&&(this.refresh(7,0),this._refreshButton("\u65e5\u671f\u5f02\u5e38",!1,!1))},refresh:function(e,t){for(var i=1;i<=7;i++)this.itemCtrls[i].init("cantGet");if(e>0)for(var o=1;o<=e;o++)this.itemCtrls[o].init("alreadyGet");t>0&&this.itemCtrls[t].init("canGet")},_refreshButton:function(e,t,i){this.doubleAdLabel.string=e,this.doubleShareLabel.string=e,this.doubleAdNode.getComponent(cc.Button).interactable=t,this.doubleShareNode.getComponent(cc.Button).interactable=t,this.singleNode.active=i},onDoubleAdButtonClick:function(){audioCtrl.playEffect("musicOn");var e=this._solveWhichDayAndDimand(),t=e.whichDayYouGet,i=e.diamondCanGet;AD.showVideo(function(e){if(e)Utils.showToast(e);else{var o=cc.instantiate(this.getLayerPrefab);o.getComponent("signinGetLayerCtrl").init(2*i,!0,t),o.parent=cc.find("Canvas");var n=t+1,s=Utils.getCurTime();LocalData.refreshSigninData(n,s),Config.resetRewardType(Config.PAGE_NAMES.signin)}}.bind(this),"\u6bcf\u65e5\u7b7e\u5230-\u5e7f\u544a-\u9886\u53d6\u53cc\u500d")},onDoubleShareButtonClick:function(){audioCtrl.playEffect("musicOn");var e=this._solveWhichDayAndDimand(),t=e.whichDayYouGet,i=e.diamondCanGet;Share.share(function(e){if(e)Utils.showToast(e);else{var o=cc.instantiate(this.getLayerPrefab);o.getComponent("signinGetLayerCtrl").init(2*i,!0,t),o.parent=cc.find("Canvas");var n=t+1,s=Utils.getCurTime();LocalData.refreshSigninData(n,s),Config.resetRewardType(Config.PAGE_NAMES.signin)}}.bind(this),"\u6bcf\u65e5\u7b7e\u5230-\u5206\u4eab-\u9886\u53d6\u53cc\u500d")},onSingleButtonClick:function(){audioCtrl.playEffect("musicOn");var e=this._solveWhichDayAndDimand(),t=e.whichDayYouGet,i=e.diamondCanGet,o=cc.instantiate(this.getLayerPrefab);o.getComponent("signinGetLayerCtrl").init(i,!1,t),o.parent=cc.find("Canvas");var n=t+1,s=Utils.getCurTime();LocalData.refreshSigninData(n,s)},onCloseButtonClick:function(){audioCtrl.playEffect("musicOff"),Utils.outAction(this.node,this.bgNode,this.blockNode)},_solveWhichDayAndDimand:function(){var e=0,t=LocalData.signinCanGetDay,i=LocalData.signinGetTime,o=Utils.offsetDay(i,Utils.getCurTime());return o>1?e=1:1==o&&(e=t),{whichDayYouGet:e,diamondCanGet:this.diamondByDay[e]}}}),cc._RF.pop()},{signinItemCtrl:"signinItemCtrl"}],unlockCastleLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"bc495wtPRZGjJJCuC3Lvbxo","unlockCastleLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,castleSprite:cc.Sprite,lvLabel:cc.Label,diamondLabel:cc.Label,titleLabel:cc.Label},onLoad:function(){var e=cc.view.getVisibleSize().height;e-=400,this.fixedNode.height>e&&(this.fixedNode.scale=e/this.fixedNode.height),0==JsNativeBridge.canShow()&&(cc.find("fixedNode/shareButton",this.node).y=-2e3),cc.sys.platform==cc.sys.BYTE_GAME&&(cc.find("byteWaterFlowNode",this.node).active=!0,cc.find("fixedNode",this.node).y=200)},start:function(){},init:function(e){Utils.loadResWithCorrection("Castles/"+e,cc.SpriteFrame,function(e,t){if(e)cc.log(e);else{if(0==cc.isValid(this.node))return;this.castleSprite.spriteFrame=t,Utils.setNodeJellyForever(this.castleSprite.node)}}.bind(this)),this.lvLabel.string=e,CSV.castle[e],this.diamondLabel.string="X"+CSV.castle[e-1].diamond,this.titleLabel.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1),cc.fadeIn(1)))),audioCtrl.playEffect("light")},onShareButtonClick:function(){JsNativeBridge.showShare({})},onCloseButtonClick:function(){this.titleLabel.node.active&&(audioCtrl.playEffect("musicOff"),this.node.destroy(),LocalData.save())}}),cc._RF.pop()},{}],unlockMasterLayerCtrl:[function(e,t){"use strict";cc._RF.push(t,"b48fd+v4ztOXrMScOxZi/nJ","unlockMasterLayerCtrl"),cc.Class({extends:cc.Component,properties:{fixedNode:cc.Node,masterSprite:cc.Sprite,masterAtlas:cc.SpriteAtlas,nameLabel:cc.Label,speedBar:cc.ProgressBar,rewardBar:cc.ProgressBar,titleLabel:cc.Label},onLoad:function(){Utils.adaptNode(this.fixedNode),0==JsNativeBridge.canShow()&&(cc.find("fixedNode/shareButton",this.node).y=-2e3),cc.sys.platform==cc.sys.BYTE_GAME&&(cc.find("byteWaterFlowNode",this.node).active=!0,cc.find("fixedNode",this.node).y=200)},start:function(){},init:function(e){this.masterSprite.spriteFrame=this.masterAtlas.getSpriteFrame("MN-LV"+e);var t=CSV.master[e];this.nameLabel.string="LV"+e+" "+t.name,this.speedBar.progress=parseFloat(t.speed)/Config.masterMaxSpeed,this.rewardBar.progress=Utils.solveMasterRewardProgress(parseFloat(t.reward)),this.titleLabel.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1),cc.fadeIn(1)))),audioCtrl.playEffect("light"),setTimeout(function(){Utils.setNodeJellyForever(this.masterSprite.node)}.bind(this),.5)},onShareButtonClick:function(){JsNativeBridge.showShare({})},onCloseButtonClick:function(){this.titleLabel.node.active&&(audioCtrl.playEffect("musicOff"),this.node.destroy(),LocalData.save())}}),cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,t){"use strict";cc._RF.push(t,"34f5dEVwUpCAqk0Nhi4kDBE","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"21d81XGGFVG/JRxeeexeB3D","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["TableViewCtrlH","TableViewCtrlV","labelTickHelper","dialogCtrl","lightCtrl","BoatSDK","Language","LoginSceneCtrl","NewScript","CheckBoardCtrl","CheckBoardItemCtrl","CheckBoardLightCtrl","MainSceneCtrl","UIAddCtrl","UIButterflyCtrl","UIByteCustomButtonCtrl","UICtrl","UIInviteCtrl","UIMoreNodeCtrl","UISigninCtrl","UIVideoCtrl","UItranscendCtrl","aboutNodeCtrl","castleCtrl","grayCtrl","guideCtrl","personCtrl","moreButtonCtrl","moreLayerCtrl","moreitemCtrl","plunderItemCtrl","plundersCtrl","use_reversed_rotateBy","use_v2.0.x_cc.Toggle_event","ByteShareRecordLayerCtrl","UIMoreGameItemCtrl","aboutLayerCtrl","butterflLayerCtrl","byteWaterFlowNodeCtrl","coinLackLayerCtrl","coinRainLayerCtrl","doubleSpeedLayerCtrl","freeUpgradeLayerCtrl","helpLayerCtrl","inivitedTableViewCtrl","invitedItemCtrl","invitedLayerCtrl","lotteryLayerCtrl","offlineRewardLayerCtrl","pyqLayerCtrl","rankItemCtrl","rankLayerCtrl","rankWorldLayer","shopLayerCtrl","shopMasterItemCtrl","shopMasterLayerCtrl","shopTechItemCtrl","shopTechLayerCtrl","signinGetLayerCtrl","signinItemCtrl","signinLayerCtrl","unlockCastleLayerCtrl","unlockMasterLayerCtrl"]);